<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Forestlake</title><link>https://doulifv.github.io/blog</link><description>ğŸ‘¨ğŸ»â€ğŸ’»ä¸€ä¸ªä¸šä½™ç©å®¶ï¼Œæ²¡äº‹å°±å–œæ¬¢ç©ä¸€äº›ç½‘ç»œæŠ€æœ¯ã€‚</description><copyright>Forestlake</copyright><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://i.mji.rip/2025/10/10/233dd815c949e025f1251a319cb22724.jpeg</url><title>avatar</title><link>https://doulifv.github.io/blog</link></image><lastBuildDate>Sun, 09 Nov 2025 02:36:33 +0000</lastBuildDate><managingEditor>Forestlake</managingEditor><ttl>60</ttl><webMaster>Forestlake</webMaster><item><title>hysteriaè®¾ç½®ç«¯å£è·³è·ƒ</title><link>https://doulifv.github.io/blog/post/hysteria-she-zhi-duan-kou-tiao-yue.html</link><description>## å®‰è£… iptables-persistent
```
sudo apt update
sudo apt install iptables-persistent
```
é»˜è®¤æƒ…å†µä¸‹iptablesè§„åˆ™ä¼šåœ¨é‡å¯åå¤±æ•ˆï¼Œå› æ­¤é€šè¿‡å®‰è£…iptables-persistentæ¥æŒä¹…åŒ–é…ç½®æ–‡ä»¶
**åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šæç¤ºä½ æ˜¯å¦è¦ä¿å­˜å½“å‰çš„ iptables è§„åˆ™ï¼Œé€‰æ‹©â€œYesâ€ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/hysteria-she-zhi-duan-kou-tiao-yue.html</guid><pubDate>Sun, 09 Nov 2025 02:36:02 +0000</pubDate></item><item><title>alipineä¸Šå®‰è£…hysteria</title><link>https://doulifv.github.io/blog/post/alipine-shang-an-zhuang-hysteria.html</link><description>source [alpine-hysteria2](https://github.com/zrlhk/alpine-hysteria2)
---
ä¸€é”®å®‰è£…
```
wget -O hy2.sh https://raw.githubusercontent.com/zrlhk/alpine-hysteria2/main/hy2.sh  &amp;&amp; sh hy2.sh
```

_è¯´æ˜:é…ç½®æ–‡ä»¶ï¼š**/etc/hysteria/config.yaml**
ä½¿ç”¨è‡ªç­¾åè¯ä¹¦ï¼Œé»˜è®¤ç«¯å£40443ï¼Œå®‰å…¨tlsï¼ŒSNIä¸ºï¼š bing.com
éšç³»ç»Ÿè‡ªå¯åŠ¨
çœ‹çŠ¶æ€ **service hysteria status**
é‡å¯ **service hysteria restart**_

---

å®‰è£…è„šæœ¬æºä»£ç 
```
#!/bin/bash

apk add wget curl git openssh openssl openrc

generate_random_password() {
  dd if=/dev/random bs=18 count=1 status=none | base64
}

GENPASS='$(generate_random_password)'

echo_hysteria_config_yaml() {
  cat &lt;&lt; EOF
listen: :40443


#æœ‰åŸŸåï¼Œä½¿ç”¨CAè¯ä¹¦
#acme:
#  domains:
#    - test.heybro.bid #ä½ çš„åŸŸåï¼Œéœ€è¦å…ˆè§£æåˆ°æœåŠ¡å™¨ip
#  email: xxx@gmail.com

#ä½¿ç”¨è‡ªç­¾åè¯ä¹¦
tls:
  cert: /etc/hysteria/server.crt
  key: /etc/hysteria/server.key

auth:
  type: password
  password: $GENPASS

masquerade:
  type: proxy
  proxy:
    url: https://bing.com/
    rewriteHost: true
EOF
}

echo_hysteria_autoStart(){
  cat &lt;&lt; EOF
#!/sbin/openrc-run

name='hysteria'

command='/usr/local/bin/hysteria'
command_args='server --config /etc/hysteria/config.yaml'

pidfile='/var/run/${name}.pid'

command_background='yes'

depend() {
        need networking
}

EOF
}


wget -O /usr/local/bin/hysteria https://download.hysteria.network/app/latest/hysteria-linux-amd64  --no-check-certificate
chmod +x /usr/local/bin/hysteria

mkdir -p /etc/hysteria/

openssl req -x509 -nodes -newkey ec:&lt;(openssl ecparam -name prime256v1) -keyout /etc/hysteria/server.key -out /etc/hysteria/server.crt -subj '/CN=bing.com' -days 36500

#å†™é…ç½®æ–‡ä»¶
echo_hysteria_config_yaml &gt; '/etc/hysteria/config.yaml'

#å†™è‡ªå¯åŠ¨
echo_hysteria_autoStart &gt; '/etc/init.d/hysteria'
chmod +x /etc/init.d/hysteria
#å¯ç”¨è‡ªå¯åŠ¨
rc-update add hysteria

service hysteria start

#å¯åŠ¨hy2
#/usr/local/bin/hysteria  server --config /etc/hysteria/config.yaml &amp;

echo '------------------------------------------------------------------------'
echo 'hysteria2å·²ç»å®‰è£…å®Œæˆ'
echo 'é»˜è®¤ç«¯å£ï¼š 40443 ï¼Œ å¯†ç ä¸ºï¼š $GENPASS ï¼Œå·¥å…·ä¸­é…ç½®ï¼štlsï¼ŒSNIä¸ºï¼š bing.com'
echo 'é…ç½®æ–‡ä»¶ï¼š/etc/hysteria/config.yaml'
echo 'å·²ç»éšç³»ç»Ÿè‡ªåŠ¨å¯åŠ¨'
echo 'çœ‹çŠ¶æ€ service hysteria status'
echo 'é‡å¯ service hysteria restart'
echo 'è¯·äº«ç”¨ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/alipine-shang-an-zhuang-hysteria.html</guid><pubDate>Sat, 08 Nov 2025 01:03:19 +0000</pubDate></item><item><title>TUIC v5ä¸€é”®è„šæœ¬</title><link>https://doulifv.github.io/blog/post/TUIC%20v5-yi-jian-jiao-ben.html</link><description>```
#!/bin/bash

export LANG=en_US.UTF-8

RED='\033[31m'
GREEN='\033[32m'
YELLOW='\033[33m'
PLAIN='\033[0m'

red(){
    echo -e '\033[31m\033[01m$1\033[0m'
}

green(){
    echo -e '\033[32m\033[01m$1\033[0m'
}

yellow(){
    echo -e '\033[33m\033[01m$1\033[0m'
}

# åˆ¤æ–­ç³»ç»ŸåŠå®šä¹‰ç³»ç»Ÿå®‰è£…ä¾èµ–æ–¹å¼
REGEX=('debian' 'ubuntu' 'centos|red hat|kernel|oracle linux|alma|rocky' ''amazon linux'' 'fedora')
RELEASE=('Debian' 'Ubuntu' 'CentOS' 'CentOS' 'Fedora')
PACKAGE_UPDATE=('apt-get update' 'apt-get update' 'yum -y update' 'yum -y update' 'yum -y update')
PACKAGE_INSTALL=('apt -y install' 'apt -y install' 'yum -y install' 'yum -y install' 'yum -y install')
PACKAGE_REMOVE=('apt -y remove' 'apt -y remove' 'yum -y remove' 'yum -y remove' 'yum -y remove')
PACKAGE_UNINSTALL=('apt -y autoremove' 'apt -y autoremove' 'yum -y autoremove' 'yum -y autoremove' 'yum -y autoremove')

[[ $EUID -ne 0 ]] &amp;&amp; red 'æ³¨æ„: è¯·åœ¨rootç”¨æˆ·ä¸‹è¿è¡Œè„šæœ¬' &amp;&amp; exit 1

CMD=('$(grep -i pretty_name /etc/os-release 2&gt;/dev/null | cut -d \' -f2)' '$(hostnamectl 2&gt;/dev/null | grep -i system | cut -d : -f2)' '$(lsb_release -sd 2&gt;/dev/null)' '$(grep -i description /etc/lsb-release 2&gt;/dev/null | cut -d \' -f2)' '$(grep . /etc/redhat-release 2&gt;/dev/null)' '$(grep . /etc/issue 2&gt;/dev/null | cut -d \\ -f1 | sed '/^[ ]*$/d')')

for i in '${CMD[@]}'; do
    SYS='$i' &amp;&amp; [[ -n $SYS ]] &amp;&amp; break
done

for ((int = 0; int &lt; ${#REGEX[@]}; int++)); do
    [[ $(echo '$SYS' | tr '[:upper:]' '[:lower:]') =~ ${REGEX[int]} ]] &amp;&amp; SYSTEM='${RELEASE[int]}' &amp;&amp; [[ -n $SYSTEM ]] &amp;&amp; break
done

[[ -z $SYSTEM ]] &amp;&amp; red 'ç›®å‰æš‚ä¸æ”¯æŒä½ çš„VPSçš„æ“ä½œç³»ç»Ÿï¼' &amp;&amp; exit 1

if [[ -z $(type -P curl) ]]; then
    if [[ ! $SYSTEM == 'CentOS' ]]; then
        ${PACKAGE_UPDATE[int]}
    fi
    ${PACKAGE_INSTALL[int]} curl
fi

archAffix(){
    case '$(uname -m)' in
        x86_64 | amd64 ) echo 'amd64' ;;
        armv8 | arm64 | aarch64 ) echo 'arm64' ;;
        * ) red 'ä¸æ”¯æŒçš„CPUæ¶æ„!' &amp;&amp; exit 1 ;;
    esac
}

realip(){
    ip=$(curl -s4m8 ip.sb -k) || ip=$(curl -s6m8 ip.sb -k)
}

check_ip(){
    warpv6=$(curl -s6m8 https://www.cloudflare.com/cdn-cgi/trace -k | grep warp | cut -d= -f2)
    warpv4=$(curl -s4m8 https://www.cloudflare.com/cdn-cgi/trace -k | grep warp | cut -d= -f2)
    if [[ $warpv4 =~ on|plus || $warpv6 =~ on|plus ]]; then
        wg-quick down wgcf &gt;/dev/null 2&gt;&amp;1
        systemctl stop warp-go &gt;/dev/null 2&gt;&amp;1
        realip
        systemctl start warp-go &gt;/dev/null 2&gt;&amp;1
        wg-quick up wgcf &gt;/dev/null 2&gt;&amp;1
    else
        realip
    fi
}

tuic_cert(){
    green 'Tuic åè®®è¯ä¹¦ç”³è¯·æ–¹å¼å¦‚ä¸‹ï¼š'
    echo ''
    echo -e ' ${GREEN}1.${PLAIN} å¿…åº”è‡ªç­¾è¯ä¹¦ ${YELLOW}ï¼ˆé»˜è®¤ï¼‰${PLAIN}'
    echo -e ' ${GREEN}2.${PLAIN} Acme è„šæœ¬ç”³è¯·'
    echo -e ' ${GREEN}3.${PLAIN} è‡ªå®šä¹‰è¯ä¹¦è·¯å¾„'
    echo ''
    read -rp 'è¯·è¾“å…¥é€‰é¡¹ [1-2]: ' certInput
    if [[ $certInput == 3 ]]; then
        read -p 'è¯·è¾“å…¥å…¬é’¥æ–‡ä»¶ crt çš„è·¯å¾„ï¼š' cert_path
        yellow 'å…¬é’¥æ–‡ä»¶ crt çš„è·¯å¾„ï¼š$cert_path '
        read -p 'è¯·è¾“å…¥å¯†é’¥æ–‡ä»¶ key çš„è·¯å¾„ï¼š' key_path
        yellow 'å¯†é’¥æ–‡ä»¶ key çš„è·¯å¾„ï¼š$key_path '
        read -p 'è¯·è¾“å…¥è¯ä¹¦çš„åŸŸåï¼š' domain
        yellow 'è¯ä¹¦åŸŸåï¼š$domain'
    elif [[ $certInput == 2 ]]; then
        cert_path='/root/cert.crt'
        key_path='/root/private.key'
        if [[ -f /root/cert.crt &amp;&amp; -f /root/private.key ]] &amp;&amp; [[ -s /root/cert.crt &amp;&amp; -s /root/private.key ]] &amp;&amp; [[ -f /root/ca.log ]]; then
            domain=$(cat /root/ca.log)
            green 'æ£€æµ‹åˆ°åŸæœ‰åŸŸåï¼š$domain çš„è¯ä¹¦ï¼Œæ­£åœ¨åº”ç”¨'
        else
            WARPv4Status=$(curl -s4m8 https://www.cloudflare.com/cdn-cgi/trace -k | grep warp | cut -d= -f2)
            WARPv6Status=$(curl -s6m8 https://www.cloudflare.com/cdn-cgi/trace -k | grep warp | cut -d= -f2)
            if [[ $WARPv4Status =~ on|plus ]] || [[ $WARPv6Status =~ on|plus ]]; then
                wg-quick down wgcf &gt;/dev/null 2&gt;&amp;1
                systemctl stop warp-go &gt;/dev/null 2&gt;&amp;1
                realip
                wg-quick up wgcf &gt;/dev/null 2&gt;&amp;1
                systemctl start warp-go &gt;/dev/null 2&gt;&amp;1
            else
                realip
            fi
            
            read -p 'è¯·è¾“å…¥éœ€è¦ç”³è¯·è¯ä¹¦çš„åŸŸåï¼š' domain
            [[ -z $domain ]] &amp;&amp; red 'æœªè¾“å…¥åŸŸåï¼Œæ— æ³•æ‰§è¡Œæ“ä½œï¼' &amp;&amp; exit 1
            green 'å·²è¾“å…¥çš„åŸŸåï¼š$domain' &amp;&amp; sleep 1
            domainIP=$(dig @8.8.8.8 +time=2 +short '$domain' 2&gt;/dev/null)
            if echo $domainIP | grep -q 'network unreachable\|timed out' || [[ -z $domainIP ]]; then
                domainIP=$(dig @2001:4860:4860::8888 +time=2 aaaa +short '$domain' 2&gt;/dev/null)
            fi
            if echo $domainIP | grep -q 'network unreachable\|timed out' || [[ -z $domainIP ]] ; then
                red 'æœªè§£æå‡º IPï¼Œè¯·æ£€æŸ¥åŸŸåæ˜¯å¦è¾“å…¥æœ‰è¯¯' 
                yellow 'æ˜¯å¦å°è¯•å¼ºè¡ŒåŒ¹é…ï¼Ÿ'
                green '1. æ˜¯ï¼Œå°†ä½¿ç”¨å¼ºè¡ŒåŒ¹é…'
                green '2. å¦ï¼Œé€€å‡ºè„šæœ¬'
                read -p 'è¯·è¾“å…¥é€‰é¡¹ [1-2]ï¼š' ipChoice
                if [[ $ipChoice == 1 ]]; then
                    yellow 'å°†å°è¯•å¼ºè¡ŒåŒ¹é…ä»¥ç”³è¯·åŸŸåè¯ä¹¦'
                else
                    red 'å°†é€€å‡ºè„šæœ¬'
                    exit 1
                fi
            fi
            
            if [[ $domainIP == $ip ]]; then
                ${PACKAGE_INSTALL[int]} curl wget sudo socat openssl
                if [[ $SYSTEM == 'CentOS' ]]; then
                    ${PACKAGE_INSTALL[int]} cronie
                    systemctl start crond
                    systemctl enable crond
                else
                    ${PACKAGE_INSTALL[int]} cron
                    systemctl start cron
                    systemctl enable cron
                fi
                curl https://get.acme.sh | sh -s email=$(date +%s%N | md5sum | cut -c 1-16)@gmail.com
                source ~/.bashrc
                bash ~/.acme.sh/acme.sh --upgrade --auto-upgrade
                bash ~/.acme.sh/acme.sh --set-default-ca --server letsencrypt
                if [[ -n $(echo $ip | grep ':') ]]; then
                    bash ~/.acme.sh/acme.sh --issue -d ${domain} --standalone -k ec-256 --listen-v6 --insecure
                else
                    bash ~/.acme.sh/acme.sh --issue -d ${domain} --standalone -k ec-256 --insecure
                fi
                bash ~/.acme.sh/acme.sh --install-cert -d ${domain} --key-file /root/private.key --fullchain-file /root/cert.crt --ecc
                if [[ -f /root/cert.crt &amp;&amp; -f /root/private.key ]] &amp;&amp; [[ -s /root/cert.crt &amp;&amp; -s /root/private.key ]]; then
                    echo $domain &gt; /root/ca.log
                    sed -i '/--cron/d' /etc/crontab &gt;/dev/null 2&gt;&amp;1
                    echo '0 0 * * * root bash /root/.acme.sh/acme.sh --cron -f &gt;/dev/null 2&gt;&amp;1' &gt;&gt; /etc/crontab
                    green 'è¯ä¹¦ç”³è¯·æˆåŠŸ! è„šæœ¬ç”³è¯·åˆ°çš„è¯ä¹¦ (cert.crt) å’Œç§é’¥ (private.key) æ–‡ä»¶å·²ä¿å­˜åˆ° /root æ–‡ä»¶å¤¹ä¸‹'
                    yellow 'è¯ä¹¦crtæ–‡ä»¶è·¯å¾„å¦‚ä¸‹: /root/cert.crt'
                    yellow 'ç§é’¥keyæ–‡ä»¶è·¯å¾„å¦‚ä¸‹: /root/private.key'
                fi
            else
                red 'å½“å‰åŸŸåè§£æçš„IPä¸å½“å‰VPSä½¿ç”¨çš„çœŸå®IPä¸åŒ¹é…'
                green 'å»ºè®®å¦‚ä¸‹ï¼š'
                yellow '1. è¯·ç¡®ä¿CloudFlareå°äº‘æœµä¸ºå…³é—­çŠ¶æ€(ä»…é™DNS), å…¶ä»–åŸŸåè§£ææˆ–CDNç½‘ç«™è®¾ç½®åŒç†'
                yellow '2. è¯·æ£€æŸ¥DNSè§£æè®¾ç½®çš„IPæ˜¯å¦ä¸ºVPSçš„çœŸå®IP'
                yellow '3. è„šæœ¬å¯èƒ½è·Ÿä¸ä¸Šæ—¶ä»£, å»ºè®®æˆªå›¾å‘å¸ƒåˆ°GitHub Issuesã€GitLab Issuesã€è®ºå›æˆ–TGç¾¤è¯¢é—®'
            fi
        fi
    else
        cert_path='/root/bing/cert.crt'
        key_path='/root/bing/private.key'
        domain='www.bing.com'

        mkdir /root/bing &amp;&amp; cd /root/bing

        openssl ecparam -genkey -name prime256v1 -out private.key
        openssl req -new -x509 -days 36500 -key private.key -out cert.crt -subj '/CN=www.bing.com'
    fi
}

tuic_port(){
    read -p 'è®¾ç½® tuic ç«¯å£ [1-65535]ï¼ˆå›è½¦åˆ™éšæœºåˆ†é…ç«¯å£ï¼‰ï¼š' port
    [[ -z $port ]] &amp;&amp; port=$(shuf -i 2000-65535 -n 1)
    until [[ -z $(ss -tunlp | grep -w udp | awk '{print $5}' | sed 's/.*://g' | grep -w '$port') ]]; do
        if [[ -n $(ss -tunlp | grep -w udp | awk '{print $5}' | sed 's/.*://g' | grep -w '$port') ]]; then
            echo -e '${RED} $port ${PLAIN} ç«¯å£å·²ç»è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œè¯·æ›´æ¢ç«¯å£é‡è¯•ï¼'
            read -p 'è®¾ç½® tuic ç«¯å£ [1-65535]ï¼ˆå›è½¦åˆ™éšæœºåˆ†é…ç«¯å£ï¼‰ï¼š' port
            [[ -z $port ]] &amp;&amp; port=$(shuf -i 2000-65535 -n 1)
        fi
    done
    yellow 'å°†åœ¨ tuic èŠ‚ç‚¹ä½¿ç”¨çš„ç«¯å£æ˜¯ï¼š$port'
}

inst_tuv4(){
    check_ip

    if [[ ! ${SYSTEM} == 'CentOS' ]]; then
        ${PACKAGE_UPDATE}
        ${PACKAGE_INSTALL} bind-utils
    fi
    ${PACKAGE_INSTALL} wget curl sudo dnsutils

    wget https://gitlab.com/Misaka-blog/tuic-script/-/raw/main/files/tuic-latest-linux-$(archAffix) -O /usr/local/bin/tuic
    if [[ -f '/usr/local/bin/tuic' ]]; then
        chmod +x /usr/local/bin/tuic
    else
        red 'Tuic V4 å†…æ ¸å®‰è£…å¤±è´¥ï¼'
        exit 1
    fi

    tuic_cert
    tuic_port

    read -p 'è®¾ç½® tuic Tokenï¼ˆå›è½¦è·³è¿‡ä¸ºéšæœºå­—ç¬¦ï¼‰ï¼š' token
    [[ -z $token ]] &amp;&amp; token=$(date +%s%N | md5sum | cut -c 1-8)

    green 'æ­£åœ¨é…ç½® Tuic...'
    if [[ $domain == 'www.bing.com' ]]; then
        finaldomain=$ip
        snidomain=$domain
    else
        finaldomain=$domain
        snidomain=$domain
    fi

    mkdir /etc/tuic &gt;/dev/null 2&gt;&amp;1
    cat &lt;&lt; EOF &gt; /etc/tuic/tuic.json
{
    'port': $port,
    'token': ['$token'],
    'certificate': '$cert_path',
    'private_key': '$key_path',
    'ip': '::',
    'congestion_controller': 'bbr',
    'alpn': ['h3']
}
EOF
    mkdir /root/tuic &gt;/dev/null 2&gt;&amp;1
    cat &lt;&lt; EOF &gt; /root/tuic/tuic-client.json
{
    'relay': {
        'server': '$finaldomain',
        'port': $port,
        'token': '$token',
        'ip': '$ip',
        'congestion_controller': 'bbr',
        'udp_relay_mode': 'quic',
        'alpn': ['h3'],
        'disable_sni': false,
        'reduce_rtt': false,
        'max_udp_relay_packet_size': 1500
    },
    'local': {
        'port': 6080,
        'ip': '127.0.0.1'
    },
    'log_level': 'off'
}
EOF
    cat &lt;&lt; EOF &gt; /root/tuic/tuic.txt
Sagernet ä¸ å°ç«ç®­ é…ç½®è¯´æ˜ï¼ˆä»¥ä¸‹6é¡¹å¿…å¡«ï¼‰ï¼š
{
    æœåŠ¡å™¨åœ°å€ï¼š$finaldomain
    æœåŠ¡å™¨ç«¯å£ï¼š$port
    tokenï¼š$token
    SNI: $snidomain
    ALPNï¼šh3
    UDP è½¬å‘ï¼šå¼€å¯
    UDP è½¬å‘æ¨¡å¼ï¼šQUIC
    æ‹¥å¡æ§åˆ¶ï¼šbbr
    è·³è¿‡æœåŠ¡å™¨è¯ä¹¦éªŒè¯ï¼šå¼€å¯
}
EOF
    cat &lt;&lt; EOF &gt; /root/tuic/clash-meta.yaml
mixed-port: 7890
external-controller: 127.0.0.1:9090
allow-lan: false
mode: rule
log-level: debug
ipv6: true
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  nameserver:
    - 8.8.8.8
    - 1.1.1.1
    - 114.114.114.114

proxies:
  - name: Misaka-tuicV4
    server: $finaldomain
    port: $port
    type: tuic
    token: $token
    ip: $ip
    alpn: [h3]
    disable-sni: true
    reduce-rtt: true
    request-timeout: 8000
    udp-relay-mode: quic
    congestion-controller: bbr
    skip-cert-verify: true
    sni: $snidomain

proxy-groups:
  - name: Proxy
    type: select
    proxies:
      - Misaka-tuicV4
      
rules:
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
EOF
    
    url='tuic://$finaldomain:$port?password=$token&amp;alpn=h3&amp;mode=bbr#tuic-misaka'
    echo ${url} &gt; /root/tuic/url.txt

    cat &lt;&lt; EOF &gt;/etc/systemd/system/tuic.service
[Unit]
Description=tuic Service
Documentation=https://gitlab.com/Misaka-blog/tuic-script
After=network.target
[Service]
User=root
ExecStart=/usr/local/bin/tuic -c /etc/tuic/tuic.json
Restart=on-failure
RestartSec=10
LimitNOFILE=infinity
[Install]
WantedBy=multi-user.target
EOF
    
    systemctl daemon-reload
    systemctl enable tuic
    systemctl start tuic

    if [[ -n $(systemctl status tuic 2&gt;/dev/null | grep -w active) &amp;&amp; -f '/etc/tuic/tuic.json' ]]; then
        green 'tuic æœåŠ¡å¯åŠ¨æˆåŠŸ'
    else
        red 'tuic æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œè¯·è¿è¡Œ systemctl status tuic æŸ¥çœ‹æœåŠ¡çŠ¶æ€å¹¶åé¦ˆï¼Œè„šæœ¬é€€å‡º' &amp;&amp; exit 1
    fi

    showconf
}

unst_tuv4(){
    systemctl stop tuic
    systemctl disable tuic
    rm -f /etc/systemd/system/tuic.service /root/tuic.sh
    rm -rf /usr/local/bin/tuic /etc/tuic /root/tuic
    
    green 'Tuic V4 å·²å½»åº•å¸è½½å®Œæˆï¼'
}

inst_tuv5(){
    if [[ $(tuic -v) == '0.8.5' ]]; then
        red 'æ£€æµ‹åˆ°å·²å®‰è£… Tuic V4ï¼Œè¯·å…ˆå¸è½½å†å®‰è£… Tuic V5ï¼'
        exit 1
    fi

    check_ip

    if [[ ! ${SYSTEM} == 'CentOS' ]]; then
        ${PACKAGE_UPDATE}
    fi
    ${PACKAGE_INSTALL} wget curl sudo

    wget https://gitlab.com/Misaka-blog/tuic-script/-/raw/main/files/tuic-server-latest-linux-$(archAffix) -O /usr/local/bin/tuic
    if [[ -f '/usr/local/bin/tuic' ]]; then
        chmod +x /usr/local/bin/tuic
    else
        red 'Tuic V5 å†…æ ¸å®‰è£…å¤±è´¥ï¼'
        exit 1
    fi

    tuic_cert
    tuic_port

    read -p 'è®¾ç½® tuic UUIDï¼ˆå›è½¦è·³è¿‡ä¸ºéšæœº UUIDï¼‰ï¼š' uuid
    [[ -z $uuid ]] &amp;&amp; uuid=$(cat /proc/sys/kernel/random/uuid)
    yellow 'ä½¿ç”¨åœ¨ tuic èŠ‚ç‚¹çš„ UUID ä¸ºï¼š$uuid'

    read -p 'è®¾ç½® tuic å¯†ç ï¼ˆå›è½¦è·³è¿‡ä¸ºéšæœºå­—ç¬¦ï¼‰ï¼š' passwd
    [[ -z $passwd ]] &amp;&amp; passwd=$(date +%s%N | md5sum | cut -c 1-8)
    yellow 'ä½¿ç”¨åœ¨ tuic èŠ‚ç‚¹çš„å¯†ç ä¸ºï¼š$passwd'

    green 'æ­£åœ¨é…ç½® Tuic...'
    if [[ $domain == 'www.bing.com' ]]; then
        finaldomain=$ip
        snidomain=$domain
    else
        finaldomain=$domain
        snidomain=$domain
    fi

    mkdir /etc/tuic &gt;/dev/null 2&gt;&amp;1
    cat &lt;&lt; EOF &gt; /etc/tuic/tuic.json
{
    'server': '[::]:$port',
    'users': {
        '$uuid': '$passwd'
    },
    'certificate': '$cert_path',
    'private_key': '$key_path',
    'congestion_control': 'bbr',
    'alpn': ['h3'],
    'log_level': 'warn'
}
EOF

    mkdir /root/tuic &gt;/dev/null 2&gt;&amp;1
    cat &lt;&lt; EOF &gt; /root/tuic/tuic-client.json
{
    'relay': {
        'server': '$finaldomain:$port',
        'uuid': '$uuid',
        'password': '$passwd',
        'ip': '$ip',
        'congestion_control': 'bbr',
        'alpn': ['h3']
    },
    'local': {
        'server': '127.0.0.1:6080'
    },
    'log_level': 'warn'
}
EOF
    cat &lt;&lt; EOF &gt; /root/tuic/tuic.txt
Sagernetã€Nekobox ä¸ å°ç«ç®­ é…ç½®è¯´æ˜ï¼ˆä»¥ä¸‹6é¡¹å¿…å¡«ï¼‰ï¼š
{
    æœåŠ¡å™¨åœ°å€ï¼š$finaldomain
    æœåŠ¡å™¨ç«¯å£ï¼š$port
    UUID: $uuid
    å¯†ç ï¼š$passwd
    SNI: $snidomain
    ALPNï¼šh3
    UDP è½¬å‘ï¼šå¼€å¯
    UDP è½¬å‘æ¨¡å¼ï¼šQUIC
    æ‹¥å¡æ§åˆ¶ï¼šbbr
    è·³è¿‡æœåŠ¡å™¨è¯ä¹¦éªŒè¯ï¼šå¼€å¯
}
EOF

    url='tuic://$uuid:$passwd@$finaldomain:$port?congestion_control=bbr&amp;udp_relay_mode=quic&amp;alpn=h3#tuicv5-misaka'
    echo ${url} &gt; /root/tuic/url.txt

    cat &lt;&lt; EOF &gt; /root/tuic/clash-meta.yaml
mixed-port: 7890
external-controller: 127.0.0.1:9090
allow-lan: false
mode: rule
log-level: debug
ipv6: true
dns:
  enable: true
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  nameserver:
    - 8.8.8.8
    - 1.1.1.1
    - 114.114.114.114

proxies:
  - name: Misaka-tuicV5
    server: $finaldomain
    port: $port
    type: tuic
    uuid: $uuid
    password: $passwd
    ip: $ip
    alpn: [h3]
    disable-sni: true
    reduce-rtt: true
    request-timeout: 8000
    udp-relay-mode: quic
    congestion-controller: bbr
    skip-cert-verify: true
    sni: $snidomain

proxy-groups:
  - name: Proxy
    type: select
    proxies:
      - Misaka-tuicV5
      
rules:
  - GEOIP,CN,DIRECT
  - MATCH,Proxy
EOF

    cat &lt;&lt; EOF &gt;/etc/systemd/system/tuic.service
[Unit]
Description=tuic Service
Documentation=https://gitlab.com/Misaka-blog/tuic-script
After=network.target
[Service]
User=root
ExecStart=/usr/local/bin/tuic -c /etc/tuic/tuic.json
Restart=on-failure
RestartSec=10
LimitNOFILE=infinity
[Install]
WantedBy=multi-user.target
EOF

    systemctl daemon-reload
    systemctl enable tuic
    systemctl start tuic
    
    if [[ -n $(systemctl status tuic 2&gt;/dev/null | grep -w active) &amp;&amp; -f '/etc/tuic/tuic.json' ]]; then
        green 'tuic æœåŠ¡å¯åŠ¨æˆåŠŸ'
    else
        red 'tuic æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œè¯·è¿è¡Œ systemctl status tuic æŸ¥çœ‹æœåŠ¡çŠ¶æ€å¹¶åé¦ˆï¼Œè„šæœ¬é€€å‡º' &amp;&amp; exit 1
    fi

    showconf
}

unst_tuv5(){
    systemctl stop tuic
    systemctl disable tuic
    rm -f /etc/systemd/system/tuic.service /root/tuic.sh
    rm -rf /usr/local/bin/tuic /etc/tuic /root/tuic
    
    green 'Tuic V5 å·²å½»åº•å¸è½½å®Œæˆï¼'
}

starttuic(){
    systemctl start tuic
    systemctl enable tuic &gt;/dev/null 2&gt;&amp;1
}

stoptuic(){
    systemctl stop tuic
    systemctl disable tuic &gt;/dev/null 2&gt;&amp;1
}

tuicswitch(){
    yellow 'è¯·é€‰æ‹©ä½ éœ€è¦çš„æ“ä½œï¼š'
    echo ''
    echo -e ' ${GREEN}1.${PLAIN} å¯åŠ¨ Tuic'
    echo -e ' ${GREEN}2.${PLAIN} å…³é—­ Tuic'
    echo -e ' ${GREEN}3.${PLAIN} é‡å¯ Tuic'
    echo ''
    read -rp 'è¯·è¾“å…¥é€‰é¡¹ [0-3]: ' switchInput
    case $switchInput in
        1 ) starttuic ;;
        2 ) stoptuic ;;
        3 ) stoptuic &amp;&amp; starttuic ;;
        * ) exit 1 ;;
    esac
}

changeport(){
    if [[ $(tuic -v) == '0.8.5' ]]; then
        oldport=$(cat /etc/tuic/tuic.json 2&gt;/dev/null | sed -n 2p | awk '{print $2}'| tr -d ',')

        read -p 'è®¾ç½® tuic ç«¯å£ [1-65535]ï¼ˆå›è½¦åˆ™éšæœºåˆ†é…ç«¯å£ï¼‰ï¼š' port
        [[ -z $port ]] &amp;&amp; port=$(shuf -i 2000-65535 -n 1)

        until [[ -z $(ss -tunlp | grep -w udp | awk '{print $5}' | sed 's/.*://g' | grep -w '$port') ]]; do
            if [[ -n $(ss -tunlp | grep -w udp | awk '{print $5}' | sed 's/.*://g' | grep -w '$port') ]]; then
                echo -e '${RED} $port ${PLAIN} ç«¯å£å·²ç»è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œè¯·æ›´æ¢ç«¯å£é‡è¯•ï¼'
                read -p 'è®¾ç½® tuic ç«¯å£ [1-65535]ï¼ˆå›è½¦åˆ™éšæœºåˆ†é…ç«¯å£ï¼‰ï¼š' port
                [[ -z $port ]] &amp;&amp; port=$(shuf -i 2000-65535 -n 1)
            fi
        done

        sed -i '2s/$oldport/$port/g' /etc/tuic/tuic.json
        sed -i '4s/$oldport/$port/g' /root/tuic/tuic-client.json
        sed -i '4s/$oldport/$port/g' /root/tuic/tuic.txt
        sed -i '19s/$oldport/$port/g' /root/tuic/clash-meta.yaml
        sed -i 's/$oldport/$port/g' /root/tuic/url.txt

        stoptuic &amp;&amp; starttuic

        green 'Tuic V4 èŠ‚ç‚¹ç«¯å£å·²æˆåŠŸä¿®æ”¹ä¸ºï¼š$port'
        yellow 'è¯·æ‰‹åŠ¨æ›´æ–°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä»¥ä½¿ç”¨èŠ‚ç‚¹'
        showconf
    else
        oldport=$(cat /etc/tuic/tuic.json 2&gt;/dev/null | sed -n 2p | awk '{print $2}' | tr -d ',' | awk -F ':' '{print $4}' | tr -d ''')
    
        read -p 'è®¾ç½® tuic ç«¯å£[1-65535]ï¼ˆå›è½¦åˆ™éšæœºåˆ†é…ç«¯å£ï¼‰ï¼š' port
        [[ -z $port ]] &amp;&amp; port=$(shuf -i 2000-65535 -n 1)

        until [[ -z $(ss -tunlp | grep -w udp | awk '{print $5}' | sed 's/.*://g' | grep -w '$port') ]]; do
            if [[ -n $(ss -tunlp | grep -w udp | awk '{print $5}' | sed 's/.*://g' | grep -w '$port') ]]; then
                echo -e '${RED} $port ${PLAIN} ç«¯å£å·²ç»è¢«å…¶ä»–ç¨‹åºå ç”¨ï¼Œè¯·æ›´æ¢ç«¯å£é‡è¯•ï¼'
                read -p 'è®¾ç½® tuic ç«¯å£[1-65535]ï¼ˆå›è½¦åˆ™éšæœºåˆ†é…ç«¯å£ï¼‰ï¼š' port
                [[ -z $port ]] &amp;&amp; port=$(shuf -i 2000-65535 -n 1)
            fi
        done

        sed -i '2s/$oldport/$port/g' /etc/tuic/tuic.json
        sed -i '3s/$oldport/$port/g' /root/tuic/tuic-client.json
        sed -i '4s/$oldport/$port/g' /root/tuic/tuic.txt
        sed -i '19s/$oldport/$port/g' /root/tuic/clash-meta.yaml

        stoptuic &amp;&amp; starttuic

        green 'Tuic èŠ‚ç‚¹ç«¯å£å·²æˆåŠŸä¿®æ”¹ä¸ºï¼š$port'
        yellow 'è¯·æ‰‹åŠ¨æ›´æ–°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä»¥ä½¿ç”¨èŠ‚ç‚¹'
        showconf
    fi
}

changetoken(){
    oldtoken=$(cat /etc/tuic/tuic.json 2&gt;/dev/null | sed -n 3p | awk '{print $2}' | tr -d ',[]'')

    read -p 'è®¾ç½®tuic Tokenï¼ˆå›è½¦è·³è¿‡ä¸ºéšæœºå­—ç¬¦ï¼‰ï¼š' token
    [[ -z $token ]] &amp;&amp; token=$(date +%s%N | md5sum | cut -c 1-8)

    sed -i '3s/$oldtoken/$token/g' /etc/tuic/tuic.json
    sed -i '5s/$oldtoken/$token/g' /root/tuic/tuic-client.json
    sed -i '5s/$oldtoken/$token/g' /root/tuic/tuic.txt
    sed -i '21s/$oldtoken/$token/g' /root/tuic/clash-meta.yaml
    sed -i 's/$oldtoken/$token/g' /root/tuic/url.txt

    stoptuic &amp;&amp; starttuic

    green 'Tuic èŠ‚ç‚¹ Token å·²æˆåŠŸä¿®æ”¹ä¸ºï¼š$token'
    yellow 'è¯·æ‰‹åŠ¨æ›´æ–°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä»¥ä½¿ç”¨èŠ‚ç‚¹'
    showconf
}

changeuuid(){
    olduuid=$(cat /etc/tuic/tuic.json 2&gt;/dev/null | sed -n 4p | awk '{print $1}' | tr -d ':'')

    read -p 'è®¾ç½® tuic UUIDï¼ˆå›è½¦è·³è¿‡ä¸ºéšæœº UUIDï¼‰ï¼š' uuid
    [[ -z $uuid ]] &amp;&amp; uuid=$(cat /proc/sys/kernel/random/uuid)

    sed -i '3s/$olduuid/$uuid/g' /etc/tuic/tuic.json
    sed -i '4s/$olduuid/$uuid/g' /root/tuic/tuic-client.json
    sed -i '5s/$olduuid/$uuid/g' /root/tuic/tuic.txt
    sed -i '21s/$olduuid/$uuid/g' /root/tuic/clash-meta.yaml

    stoptuic &amp;&amp; starttuic

    green 'Tuic èŠ‚ç‚¹ UUID å·²æˆåŠŸä¿®æ”¹ä¸ºï¼š$uuid'
    yellow 'è¯·æ‰‹åŠ¨æ›´æ–°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä»¥ä½¿ç”¨èŠ‚ç‚¹'
    showconf
}

changepasswd(){
    oldpasswd=$(cat /etc/tuic/tuic.json 2&gt;/dev/null | sed -n 4p | awk '{print $2}' | tr -d ''')

    read -p 'è®¾ç½® tuic å¯†ç ï¼ˆå›è½¦è·³è¿‡ä¸ºéšæœºå­—ç¬¦ï¼‰ï¼š' passwd
    [[ -z $passwd ]] &amp;&amp; passwd=$(date +%s%N | md5sum | cut -c 1-8)

    sed -i '3s/$oldpasswd/$passwd/g' /etc/tuic/tuic.json
    sed -i '5s/$oldpasswd/$passwd/g' /root/tuic/tuic-client.json
    sed -i '6s/$oldpasswd/$passwd/g' /root/tuic/tuic.txt
    sed -i '22s/$oldpasswd/$passwd/g' /root/tuic/clash-meta.yaml

    stoptuic &amp;&amp; starttuic

    green 'Tuic èŠ‚ç‚¹å¯†ç å·²æˆåŠŸä¿®æ”¹ä¸ºï¼š$passwd'
    yellow 'è¯·æ‰‹åŠ¨æ›´æ–°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä»¥ä½¿ç”¨èŠ‚ç‚¹'
    showconf
}

changeconf(){
    if [[ $(tuic -v) == '0.8.5' ]]; then
        green 'Tuic V4 é…ç½®å˜æ›´é€‰æ‹©å¦‚ä¸‹:'
        echo -e ' ${GREEN}1.${PLAIN} ä¿®æ”¹ç«¯å£'
        echo -e ' ${GREEN}2.${PLAIN} ä¿®æ”¹Token'
        echo ''
        read -p ' è¯·é€‰æ‹©æ“ä½œ[1-2]ï¼š' confAnswer
        case $confAnswer in
            1 ) changeport ;;
            2 ) changetoken ;;
            * ) exit 1 ;;
        esac
    else
        green 'Tuic V5 é…ç½®å˜æ›´é€‰æ‹©å¦‚ä¸‹:'
        echo -e ' ${GREEN}1.${PLAIN} ä¿®æ”¹ç«¯å£'
        echo -e ' ${GREEN}2.${PLAIN} ä¿®æ”¹ UUID'
        echo -e ' ${GREEN}3.${PLAIN} ä¿®æ”¹å¯†ç '
        echo ''
        read -p ' è¯·é€‰æ‹©æ“ä½œ [1-3]ï¼š' confAnswer
        case $confAnswer in
            1 ) changeport ;;
            2 ) changeuuid ;;
            3 ) changepasswd ;;
            * ) exit 1 ;;
        esac
    fi
}

showconf(){
    yellow 'å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ tuic-client.json å†…å®¹å¦‚ä¸‹ï¼Œå¹¶ä¿å­˜åˆ° /root/tuic/tuic-client.json'
    red '$(cat /root/tuic/tuic-client.json)'
    yellow 'Clash Meta å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶å·²ä¿å­˜åˆ° /root/tuic/clash-meta.yaml'
    yellow 'Tuic èŠ‚ç‚¹é…ç½®æ˜æ–‡å¦‚ä¸‹ï¼Œå¹¶ä¿å­˜åˆ° /root/tuic/tuic.txt'
    red '$(cat /root/tuic/tuic.txt)'
    yellow 'Tuic èŠ‚ç‚¹é“¾æ¥å¦‚ä¸‹ï¼Œå¹¶ä¿å­˜åˆ° /root/tuic/url.txt'
    red '$(cat /root/tuic/url.txt)'
}

menu() {
    clear
    echo '#############################################################'
    echo -e '#                    ${RED}Tuic ä¸€é”®å®‰è£…è„šæœ¬${PLAIN}                      #'
    echo -e '# ${GREEN}ä½œè€…${PLAIN}: MisakaNo ã® å°ç ´ç«™                                  #'
    echo -e '# ${GREEN}åšå®¢${PLAIN}: https://blog.misaka.cyou                            #'
    echo -e '# ${GREEN}GitHub é¡¹ç›®${PLAIN}: https://github.com/Misaka-blog               #'
    echo -e '# ${GREEN}GitLab é¡¹ç›®${PLAIN}: https://gitlab.com/Misaka-blog               #'
    echo -e '# ${GREEN}Telegram é¢‘é“${PLAIN}: https://t.me/misakanocchannel              #'
    echo -e '# ${GREEN}Telegram ç¾¤ç»„${PLAIN}: https://t.me/misakanoc                     #'
    echo -e '# ${GREEN}YouTube é¢‘é“${PLAIN}: https://www.youtube.com/@misaka-blog        #'
    echo '#############################################################'
    echo ''
    echo -e ' ${GREEN}1.${PLAIN} å®‰è£… Tuic V4'
    echo -e ' ${GREEN}2.${PLAIN} ${RED}å¸è½½ Tuic V4${PLAIN}'
    echo ' -------------'
    echo -e ' ${GREEN}3.${PLAIN} å®‰è£… Tuic V5'
    echo -e ' ${GREEN}4.${PLAIN} ${RED}å¸è½½ Tuic V5${PLAIN}'
    echo ' -------------'
    echo -e ' ${GREEN}5.${PLAIN} å…³é—­ã€å¯åŠ¨ã€é‡å¯ Tuic'
    echo -e ' ${GREEN}6.${PLAIN} ä¿®æ”¹ Tuic é…ç½®'
    echo -e ' ${GREEN}7.${PLAIN} æ˜¾ç¤º Tuic é…ç½®æ–‡ä»¶'
    echo ' -------------'
    echo -e ' ${GREEN}0.${PLAIN} é€€å‡ºè„šæœ¬'
    echo ''
    read -rp 'è¯·è¾“å…¥é€‰é¡¹ [0-7]: ' menuInput
    case $menuInput in
        1 ) inst_tuv4 ;;
        2 ) unst_tuv4 ;;
        3 ) inst_tuv5 ;;
        4 ) unst_tuv5 ;;
        5 ) tuicswitch ;;
        6 ) changeconf ;;
        7 ) showconf ;;
        * ) exit 1 ;;
    esac
}

menu
```
source
https://gitlab.com/Misaka-blog/tuic-script/-/raw/main/tuic.shã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/TUIC%20v5-yi-jian-jiao-ben.html</guid><pubDate>Sun, 02 Nov 2025 02:23:35 +0000</pubDate></item><item><title>edgetunnel</title><link>https://doulifv.github.io/blog/post/edgetunnel.html</link><description>```
// &lt;!--GAMFC--&gt;version base on commit 58686d5d125194d34a1137913b3a64ddcf55872f, time is 2024-11-27 09:26:01 UTC&lt;!--GAMFC-END--&gt;.
// @ts-ignore
import { connect } from 'cloudflare:sockets';

// How to generate your own UUID:
// [Windows] Press 'Win + R', input cmd and run:  Powershell -NoExit -Command '[guid]::NewGuid()'
let userID = 'd342d11e-d424-4583-b36e-524ab1f0afa4';

let proxyIP = '';


if (!isValidUUID(userID)) {
	throw new Error('uuid is not valid');
}

export default {
	/**
	 * @param {import('@cloudflare/workers-types').Request} request
	 * @param {{UUID: string, PROXYIP: string}} env
	 * @param {import('@cloudflare/workers-types').ExecutionContext} ctx
	 * @returns {Promise&lt;Response&gt;}
	 */
	async fetch(request, env, ctx) {
		try {
			userID = env.UUID || userID;
			proxyIP = env.PROXYIP || proxyIP;
			const upgradeHeader = request.headers.get('Upgrade');
			if (!upgradeHeader || upgradeHeader !== 'websocket') {
				const url = new URL(request.url);
				switch (url.pathname) {
					case '/':
						return new Response(JSON.stringify(request.cf), { status: 200 });
					case `/${userID}`: {
						const vlessConfig = getVLESSConfig(userID, request.headers.get('Host'));
						return new Response(`${vlessConfig}`, {
							status: 200,
							headers: {
								'Content-Type': 'text/plain;charset=utf-8',
							}
						});
					}
					default:
						return new Response('Not found', { status: 404 });
				}
			} else {
				return await vlessOverWSHandler(request);
			}
		} catch (err) {
			/** @type {Error} */ let e = err;
			return new Response(e.toString());
		}
	},
};




/**
 * 
 * @param {import('@cloudflare/workers-types').Request} request
 */
async function vlessOverWSHandler(request) {

	/** @type {import('@cloudflare/workers-types').WebSocket[]} */
	// @ts-ignore
	const webSocketPair = new WebSocketPair();
	const [client, webSocket] = Object.values(webSocketPair);

	webSocket.accept();

	let address = '';
	let portWithRandomLog = '';
	const log = (/** @type {string} */ info, /** @type {string | undefined} */ event) =&gt; {
		console.log(`[${address}:${portWithRandomLog}] ${info}`, event || '');
	};
	const earlyDataHeader = request.headers.get('sec-websocket-protocol') || '';

	const readableWebSocketStream = makeReadableWebSocketStream(webSocket, earlyDataHeader, log);

	/** @type {{ value: import('@cloudflare/workers-types').Socket | null}}*/
	let remoteSocketWapper = {
		value: null,
	};
	let udpStreamWrite = null;
	let isDns = false;

	// ws --&gt; remote
	readableWebSocketStream.pipeTo(new WritableStream({
		async write(chunk, controller) {
			if (isDns &amp;&amp; udpStreamWrite) {
				return udpStreamWrite(chunk);
			}
			if (remoteSocketWapper.value) {
				const writer = remoteSocketWapper.value.writable.getWriter()
				await writer.write(chunk);
				writer.releaseLock();
				return;
			}

			const {
				hasError,
				message,
				portRemote = 443,
				addressRemote = '',
				rawDataIndex,
				vlessVersion = new Uint8Array([0, 0]),
				isUDP,
			} = processVlessHeader(chunk, userID);
			address = addressRemote;
			portWithRandomLog = `${portRemote}--${Math.random()} ${isUDP ? 'udp ' : 'tcp '
				} `;
			if (hasError) {
				// controller.error(message);
				throw new Error(message); // cf seems has bug, controller.error will not end stream
				// webSocket.close(1000, message);
				return;
			}
			// if UDP but port not DNS port, close it
			if (isUDP) {
				if (portRemote === 53) {
					isDns = true;
				} else {
					// controller.error('UDP proxy only enable for DNS which is port 53');
					throw new Error('UDP proxy only enable for DNS which is port 53'); // cf seems has bug, controller.error will not end stream
					return;
				}
			}
			// ['version', 'é™„åŠ ä¿¡æ¯é•¿åº¦ N']
			const vlessResponseHeader = new Uint8Array([vlessVersion[0], 0]);
			const rawClientData = chunk.slice(rawDataIndex);

			// TODO: support udp here when cf runtime has udp support
			if (isDns) {
				const { write } = await handleUDPOutBound(webSocket, vlessResponseHeader, log);
				udpStreamWrite = write;
				udpStreamWrite(rawClientData);
				return;
			}
			handleTCPOutBound(remoteSocketWapper, addressRemote, portRemote, rawClientData, webSocket, vlessResponseHeader, log);
		},
		close() {
			log(`readableWebSocketStream is close`);
		},
		abort(reason) {
			log(`readableWebSocketStream is abort`, JSON.stringify(reason));
		},
	})).catch((err) =&gt; {
		log('readableWebSocketStream pipeTo error', err);
	});

	return new Response(null, {
		status: 101,
		// @ts-ignore
		webSocket: client,
	});
}

/**
 * Handles outbound TCP connections.
 *
 * @param {any} remoteSocket 
 * @param {string} addressRemote The remote address to connect to.
 * @param {number} portRemote The remote port to connect to.
 * @param {Uint8Array} rawClientData The raw client data to write.
 * @param {import('@cloudflare/workers-types').WebSocket} webSocket The WebSocket to pass the remote socket to.
 * @param {Uint8Array} vlessResponseHeader The VLESS response header.
 * @param {function} log The logging function.
 * @returns {Promise&lt;void&gt;} The remote socket.
 */
async function handleTCPOutBound(remoteSocket, addressRemote, portRemote, rawClientData, webSocket, vlessResponseHeader, log,) {
	async function connectAndWrite(address, port) {
		/** @type {import('@cloudflare/workers-types').Socket} */
		const tcpSocket = connect({
			hostname: address,
			port: port,
		});
		remoteSocket.value = tcpSocket;
		log(`connected to ${address}:${port}`);
		const writer = tcpSocket.writable.getWriter();
		await writer.write(rawClientData); // first write, nomal is tls client hello
		writer.releaseLock();
		return tcpSocket;
	}

	// if the cf connect tcp socket have no incoming data, we retry to redirect ip
	async function retry() {
		const tcpSocket = await connectAndWrite(proxyIP || addressRemote, portRemote)
		// no matter retry success or not, close websocket
		tcpSocket.closed.catch(error =&gt; {
			console.log('retry tcpSocket closed error', error);
		}).finally(() =&gt; {
			safeCloseWebSocket(webSocket);
		})
		remoteSocketToWS(tcpSocket, webSocket, vlessResponseHeader, null, log);
	}

	const tcpSocket = await connectAndWrite(addressRemote, portRemote);

	// when remoteSocket is ready, pass to websocket
	// remote--&gt; ws
	remoteSocketToWS(tcpSocket, webSocket, vlessResponseHeader, retry, log);
}

/**
 * 
 * @param {import('@cloudflare/workers-types').WebSocket} webSocketServer
 * @param {string} earlyDataHeader for ws 0rtt
 * @param {(info: string)=&gt; void} log for ws 0rtt
 */
function makeReadableWebSocketStream(webSocketServer, earlyDataHeader, log) {
	let readableStreamCancel = false;
	const stream = new ReadableStream({
		start(controller) {
			webSocketServer.addEventListener('message', (event) =&gt; {
				if (readableStreamCancel) {
					return;
				}
				const message = event.data;
				controller.enqueue(message);
			});

			// The event means that the client closed the client -&gt; server stream.
			// However, the server -&gt; client stream is still open until you call close() on the server side.
			// The WebSocket protocol says that a separate close message must be sent in each direction to fully close the socket.
			webSocketServer.addEventListener('close', () =&gt; {
				// client send close, need close server
				// if stream is cancel, skip controller.close
				safeCloseWebSocket(webSocketServer);
				if (readableStreamCancel) {
					return;
				}
				controller.close();
			}
			);
			webSocketServer.addEventListener('error', (err) =&gt; {
				log('webSocketServer has error');
				controller.error(err);
			}
			);
			// for ws 0rtt
			const { earlyData, error } = base64ToArrayBuffer(earlyDataHeader);
			if (error) {
				controller.error(error);
			} else if (earlyData) {
				controller.enqueue(earlyData);
			}
		},

		pull(controller) {
			// if ws can stop read if stream is full, we can implement backpressure
			// https://streams.spec.whatwg.org/#example-rs-push-backpressure
		},
		cancel(reason) {
			// 1. pipe WritableStream has error, this cancel will called, so ws handle server close into here
			// 2. if readableStream is cancel, all controller.close/enqueue need skip,
			// 3. but from testing controller.error still work even if readableStream is cancel
			if (readableStreamCancel) {
				return;
			}
			log(`ReadableStream was canceled, due to ${reason}`)
			readableStreamCancel = true;
			safeCloseWebSocket(webSocketServer);
		}
	});

	return stream;

}

// https://xtls.github.io/development/protocols/vless.html
// https://github.com/zizifn/excalidraw-backup/blob/main/v2ray-protocol.excalidraw

/**
 * 
 * @param { ArrayBuffer} vlessBuffer 
 * @param {string} userID 
 * @returns 
 */
function processVlessHeader(
	vlessBuffer,
	userID
) {
	if (vlessBuffer.byteLength &lt; 24) {
		return {
			hasError: true,
			message: 'invalid data',
		};
	}
	const version = new Uint8Array(vlessBuffer.slice(0, 1));
	let isValidUser = false;
	let isUDP = false;
	if (stringify(new Uint8Array(vlessBuffer.slice(1, 17))) === userID) {
		isValidUser = true;
	}
	if (!isValidUser) {
		return {
			hasError: true,
			message: 'invalid user',
		};
	}

	const optLength = new Uint8Array(vlessBuffer.slice(17, 18))[0];
	//skip opt for now

	const command = new Uint8Array(
		vlessBuffer.slice(18 + optLength, 18 + optLength + 1)
	)[0];

	// 0x01 TCP
	// 0x02 UDP
	// 0x03 MUX
	if (command === 1) {
	} else if (command === 2) {
		isUDP = true;
	} else {
		return {
			hasError: true,
			message: `command ${command} is not support, command 01-tcp,02-udp,03-mux`,
		};
	}
	const portIndex = 18 + optLength + 1;
	const portBuffer = vlessBuffer.slice(portIndex, portIndex + 2);
	// port is big-Endian in raw data etc 80 == 0x005d
	const portRemote = new DataView(portBuffer).getUint16(0);

	let addressIndex = portIndex + 2;
	const addressBuffer = new Uint8Array(
		vlessBuffer.slice(addressIndex, addressIndex + 1)
	);

	// 1--&gt; ipv4  addressLength =4
	// 2--&gt; domain name addressLength=addressBuffer[1]
	// 3--&gt; ipv6  addressLength =16
	const addressType = addressBuffer[0];
	let addressLength = 0;
	let addressValueIndex = addressIndex + 1;
	let addressValue = '';
	switch (addressType) {
		case 1:
			addressLength = 4;
			addressValue = new Uint8Array(
				vlessBuffer.slice(addressValueIndex, addressValueIndex + addressLength)
			).join('.');
			break;
		case 2:
			addressLength = new Uint8Array(
				vlessBuffer.slice(addressValueIndex, addressValueIndex + 1)
			)[0];
			addressValueIndex += 1;
			addressValue = new TextDecoder().decode(
				vlessBuffer.slice(addressValueIndex, addressValueIndex + addressLength)
			);
			break;
		case 3:
			addressLength = 16;
			const dataView = new DataView(
				vlessBuffer.slice(addressValueIndex, addressValueIndex + addressLength)
			);
			// 2001:0db8:85a3:0000:0000:8a2e:0370:7334
			const ipv6 = [];
			for (let i = 0; i &lt; 8; i++) {
				ipv6.push(dataView.getUint16(i * 2).toString(16));
			}
			addressValue = ipv6.join(':');
			// seems no need add [] for ipv6
			break;
		default:
			return {
				hasError: true,
				message: `invild  addressType is ${addressType}`,
			};
	}
	if (!addressValue) {
		return {
			hasError: true,
			message: `addressValue is empty, addressType is ${addressType}`,
		};
	}

	return {
		hasError: false,
		addressRemote: addressValue,
		addressType,
		portRemote,
		rawDataIndex: addressValueIndex + addressLength,
		vlessVersion: version,
		isUDP,
	};
}


/**
 * 
 * @param {import('@cloudflare/workers-types').Socket} remoteSocket 
 * @param {import('@cloudflare/workers-types').WebSocket} webSocket 
 * @param {ArrayBuffer} vlessResponseHeader 
 * @param {(() =&gt; Promise&lt;void&gt;) | null} retry
 * @param {*} log 
 */
async function remoteSocketToWS(remoteSocket, webSocket, vlessResponseHeader, retry, log) {
	// remote--&gt; ws
	let remoteChunkCount = 0;
	let chunks = [];
	/** @type {ArrayBuffer | null} */
	let vlessHeader = vlessResponseHeader;
	let hasIncomingData = false; // check if remoteSocket has incoming data
	await remoteSocket.readable
		.pipeTo(
			new WritableStream({
				start() {
				},
				/**
				 * 
				 * @param {Uint8Array} chunk 
				 * @param {*} controller 
				 */
				async write(chunk, controller) {
					hasIncomingData = true;
					// remoteChunkCount++;
					if (webSocket.readyState !== WS_READY_STATE_OPEN) {
						controller.error(
							'webSocket.readyState is not open, maybe close'
						);
					}
					if (vlessHeader) {
						webSocket.send(await new Blob([vlessHeader, chunk]).arrayBuffer());
						vlessHeader = null;
					} else {
						// seems no need rate limit this, CF seems fix this??..
						// if (remoteChunkCount &gt; 20000) {
						// 	// cf one package is 4096 byte(4kb),  4096 * 20000 = 80M
						// 	await delay(1);
						// }
						webSocket.send(chunk);
					}
				},
				close() {
					log(`remoteConnection!.readable is close with hasIncomingData is ${hasIncomingData}`);
					// safeCloseWebSocket(webSocket); // no need server close websocket frist for some case will casue HTTP ERR_CONTENT_LENGTH_MISMATCH issue, client will send close event anyway.
				},
				abort(reason) {
					console.error(`remoteConnection!.readable abort`, reason);
				},
			})
		)
		.catch((error) =&gt; {
			console.error(
				`remoteSocketToWS has exception `,
				error.stack || error
			);
			safeCloseWebSocket(webSocket);
		});

	// seems is cf connect socket have error,
	// 1. Socket.closed will have error
	// 2. Socket.readable will be close without any data coming
	if (hasIncomingData === false &amp;&amp; retry) {
		log(`retry`)
		retry();
	}
}

/**
 * 
 * @param {string} base64Str 
 * @returns 
 */
function base64ToArrayBuffer(base64Str) {
	if (!base64Str) {
		return { error: null };
	}
	try {
		// go use modified Base64 for URL rfc4648 which js atob not support
		base64Str = base64Str.replace(/-/g, '+').replace(/_/g, '/');
		const decode = atob(base64Str);
		const arryBuffer = Uint8Array.from(decode, (c) =&gt; c.charCodeAt(0));
		return { earlyData: arryBuffer.buffer, error: null };
	} catch (error) {
		return { error };
	}
}

/**
 * This is not real UUID validation
 * @param {string} uuid 
 */
function isValidUUID(uuid) {
	const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;
	return uuidRegex.test(uuid);
}

const WS_READY_STATE_OPEN = 1;
const WS_READY_STATE_CLOSING = 2;
/**
 * Normally, WebSocket will not has exceptions when close.
 * @param {import('@cloudflare/workers-types').WebSocket} socket
 */
function safeCloseWebSocket(socket) {
	try {
		if (socket.readyState === WS_READY_STATE_OPEN || socket.readyState === WS_READY_STATE_CLOSING) {
			socket.close();
		}
	} catch (error) {
		console.error('safeCloseWebSocket error', error);
	}
}

const byteToHex = [];
for (let i = 0; i &lt; 256; ++i) {
	byteToHex.push((i + 256).toString(16).slice(1));
}
function unsafeStringify(arr, offset = 0) {
	return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();
}
function stringify(arr, offset = 0) {
	const uuid = unsafeStringify(arr, offset);
	if (!isValidUUID(uuid)) {
		throw TypeError('Stringified UUID is invalid');
	}
	return uuid;
}


/**
 * 
 * @param {import('@cloudflare/workers-types').WebSocket} webSocket 
 * @param {ArrayBuffer} vlessResponseHeader 
 * @param {(string)=&gt; void} log 
 */
async function handleUDPOutBound(webSocket, vlessResponseHeader, log) {

	let isVlessHeaderSent = false;
	const transformStream = new TransformStream({
		start(controller) {

		},
		transform(chunk, controller) {
			// udp message 2 byte is the the length of udp data
			// TODO: this should have bug, beacsue maybe udp chunk can be in two websocket message
			for (let index = 0; index &lt; chunk.byteLength;) {
				const lengthBuffer = chunk.slice(index, index + 2);
				const udpPakcetLength = new DataView(lengthBuffer).getUint16(0);
				const udpData = new Uint8Array(
					chunk.slice(index + 2, index + 2 + udpPakcetLength)
				);
				index = index + 2 + udpPakcetLength;
				controller.enqueue(udpData);
			}
		},
		flush(controller) {
		}
	});

	// only handle dns udp for now
	transformStream.readable.pipeTo(new WritableStream({
		async write(chunk) {
			const resp = await fetch('https://1.1.1.1/dns-query',
				{
					method: 'POST',
					headers: {
						'content-type': 'application/dns-message',
					},
					body: chunk,
				})
			const dnsQueryResult = await resp.arrayBuffer();
			const udpSize = dnsQueryResult.byteLength;
			// console.log([...new Uint8Array(dnsQueryResult)].map((x) =&gt; x.toString(16)));
			const udpSizeBuffer = new Uint8Array([(udpSize &gt;&gt; 8) &amp; 0xff, udpSize &amp; 0xff]);
			if (webSocket.readyState === WS_READY_STATE_OPEN) {
				log(`doh success and dns message length is ${udpSize}`);
				if (isVlessHeaderSent) {
					webSocket.send(await new Blob([udpSizeBuffer, dnsQueryResult]).arrayBuffer());
				} else {
					webSocket.send(await new Blob([vlessResponseHeader, udpSizeBuffer, dnsQueryResult]).arrayBuffer());
					isVlessHeaderSent = true;
				}
			}
		}
	})).catch((error) =&gt; {
		log('dns udp has error' + error)
	});

	const writer = transformStream.writable.getWriter();

	return {
		/**
		 * 
		 * @param {Uint8Array} chunk 
		 */
		write(chunk) {
			writer.write(chunk);
		}
	};
}

/**
 * 
 * @param {string} userID 
 * @param {string | null} hostName
 * @returns {string}
 */
function getVLESSConfig(userID, hostName) {
	const protocol = 'vless';
	const vlessMain = 
	`${protocol}` + 
	`://${userID}@${hostName}:443`+
	`?encryption=none&amp;security=tls&amp;sni=${hostName}&amp;fp=randomized&amp;type=ws&amp;host=${hostName}&amp;path=%2F%3Fed%3D2048#${hostName}`;
	
	return `
################################################################
v2ray
---------------------------------------------------------------
${vlessMain}
---------------------------------------------------------------
################################################################
clash-meta
---------------------------------------------------------------
- type: vless
  name: ${hostName}
  server: ${hostName}
  port: 443
  uuid: ${userID}
  network: ws
  tls: true
  udp: false
  sni: ${hostName}
  client-fingerprint: chrome
  ws-opts:
    path: '/?ed=2048'
    headers:
      host: ${hostName}
---------------------------------------------------------------
################################################################
`;
}

```
[[edgetunnel](https://github.com/zizifn/edgetunnel)](https://github.com/zizifn/edgetunnel)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/edgetunnel.html</guid><pubDate>Sat, 01 Nov 2025 12:39:58 +0000</pubDate></item><item><title>ç¬”è®°æœ¬ç¦ç”¨è‡ªå¸¦é”®ç›˜</title><link>https://doulifv.github.io/blog/post/bi-ji-ben-jin-yong-zi-dai-jian-pan.html</link><description>ç¦ç”¨è‡ªå¸¦é”®ç›˜ **ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰** 
```
sc config i8042prt start= disabled
```
æ¢å¤å¯ç”¨è‡ªå¸¦é”®ç›˜ **ï¼ˆåŒæ ·éœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰** 
```
sc config i8042prt start= auto
```ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/bi-ji-ben-jin-yong-zi-dai-jian-pan.html</guid><pubDate>Wed, 29 Oct 2025 08:43:34 +0000</pubDate></item><item><title>Linuxæ—¶é—´åŒæ­¥</title><link>https://doulifv.github.io/blog/post/Linux-shi-jian-tong-bu.html</link><description>åŒæ­¥ç³»ç»Ÿæ—¶é—´
chronyd å‘½ä»¤å¯è®©æ‚¨æ£€æŸ¥ç³»ç»Ÿæ—¶é’Ÿå…³é—­çš„æ—¶é—´ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Linux-shi-jian-tong-bu.html</guid><pubDate>Sun, 26 Oct 2025 11:49:27 +0000</pubDate></item><item><title>Markdownå­¦ä¹ </title><link>https://doulifv.github.io/blog/post/Markdown-xue-xi.html</link><description>æˆ‘è½¬äº†=æˆ‘ä¼šäº† ( : å—¯å—¯
è¿™æ˜¯ä¸€ä¸ªmarkdownæ ¼å¼çš„æµ‹è¯•é¡µé¢ï¼Œä¹Ÿæ˜¯ä¸ªäººç»å¸¸ä¼šä½¿ç”¨çš„æ ¼å¼è®°å½•ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Markdown-xue-xi.html</guid><pubDate>Sat, 25 Oct 2025 14:12:55 +0000</pubDate></item><item><title>windwos æ°¸ä¹…æ¿€æ´»è„šæœ¬</title><link>https://doulifv.github.io/blog/post/windwos%20-yong-jiu-ji-huo-jiao-ben.html</link><description>å®æµ‹é€‚ç”¨äºWINDOWS 11 10 8 7 
**åœ¨PowerShellä¸­è¾“å…¥ä»¥å®‰è£…**
```
irm https://get.activated.win | iex
```
&gt;**Source**
&gt;[https://github.com/massgravel/Microsoft-Activation-Scripts](https://github.com/massgravel/Microsoft-Activation-Scripts)
&gt;**Maybe you can download this file run,If you need offline use.**ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/windwos%20-yong-jiu-ji-huo-jiao-ben.html</guid><pubDate>Sat, 25 Oct 2025 06:52:59 +0000</pubDate></item><item><title>æ”¶è—å¤¹</title><link>https://doulifv.github.io/blog/post/shou-cang-jia.html</link><description>[Zå“¥è§†é¢‘ç²¾é€‰](https://space.bilibili.com/453345074/channel/collectiondetail?sid=6560672&amp;spm_id_from=333.788.0.0)
&gt;ä¸è¿½ï¼Œä¸åŠ¨ï¼Œä¸æ…Œï¼Œä¸ä¹±æ‘¸ï¼ŒçŸ¥è¡Œåˆä¸€
&gt;è¸è¸å®å®ã€æ‹¿å…·ä¸åŠ¨

[ä¸€ä¸ªäººç¿»èº«æœ€å¿«çš„æ–¹æ³•ï¼šæ¢åœ°æ–¹](https://mp.weixin.qq.com/s/0Q1IbzxQTf8_IlZstiU1gw)
&gt;äººå›°åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¦‚åŒä¸€æ½­æ­»æ°´ï¼Œæ…¢æ…¢ä¼šå¤±å»æ´»åŠ›ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/shou-cang-jia.html</guid><pubDate>Sun, 19 Oct 2025 01:58:30 +0000</pubDate></item><item><title>VPSä¸Šä½¿ç”¨çš„è„šæœ¬</title><link>https://doulifv.github.io/blog/post/VPS-shang-shi-yong-de-jiao-ben.html</link><description>æŸ¥çœ‹IPä¿¡æ¯
```
curl ip.im/info
```
IPè´¨æ£€
```
bash &lt;(curl -sL IP.Check.Place)
```
```
bash &lt;(curl -sL Net.Check.Place)
```
233boy sing-boxä¸€é”®è„šæœ¬
```
bash &lt;(wget -qO- -o- https://github.com/233boy/sing-box/raw/main/install.sh)
```

**more writing...is soon**ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/VPS-shang-shi-yong-de-jiao-ben.html</guid><pubDate>Sat, 18 Oct 2025 01:58:35 +0000</pubDate></item><item><title>2053ç«¯å£å¼±å¯†ç æ‰«æ</title><link>https://doulifv.github.io/blog/post/2053-duan-kou-ruo-mi-ma-sao-miao.html</link><description>```
#!/bin/bash
#echo 'IP range:'
#read ip_range
ip_range=155
#echo 'Port'
#read port
port=2053
#echo 'IP range&amp; Port=${ip_range}.0.0.0:${port}'
masscan ${ip_range}.0.0.0/8 -p${port} --banners --rate 10000 --exclude 255.255.255.255 -oJ scan.json

for ip_ad in $(sed -nE 's/.*'ip': '([^']+)'.*/\1/p' scan.json); do
    if curl --max-time 1 http://${ip_ad}:${port}; then
        res=$(curl 'http://${ip_ad}:${port}/login' --data-raw 'username=admin&amp;password=admin' --compressed --insecure)
        if [[ '$res' =~ .*:true,.* ]]; then
            echo ${ip_ad}:${port} | tee -a week.txt
        fi
        echo ${ip_ad}:${port} | tee -a all.log
    fi
done;
```
ä¾èµ–çš„åŒ…curlã€masscané…åˆä½¿ç”¨nohupåå°è¿è¡Œã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/2053-duan-kou-ruo-mi-ma-sao-miao.html</guid><pubDate>Sat, 18 Oct 2025 01:47:01 +0000</pubDate></item><item><title>è§£å†³Steam Decké¦–æ¬¡å¼€æœºå¡æ›´æ–°æƒ…å†µ</title><link>https://doulifv.github.io/blog/post/jie-jue-Steam%20Deck-shou-ci-kai-ji-qia-geng-xin-qing-kuang.html</link><description>å®æµ‹æŒ‚ä»£ç†æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œç½‘ä¸Šæœç´¢äº†ä¸€é€šæ‰¾åˆ°è¿™ä¸ªæ–¹æ³•æ›´æ–°æˆåŠŸ

è¯¦ç»†è®²è§£æ“ä½œåŠæ³•ï¼š

1.å¦‚æœä½ å·²ç»è¿›å…¥å›¾å½¢ç•Œé¢çš„æ›´æ–°è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¯·ä½ ç°åœ¨é•¿æŒ‰ç”µæºé”®ï¼Œé‡å¯ä½ çš„deck

2.æ­£å¸¸è®¾ç½®è¯­è¨€ï¼Œæ²¡æœ‰é™åˆ¶ä¸€å®šè¦è‹±æ–‡ï¼Œé€‰ä½ å–œæ¬¢çš„è¯­è¨€å’Œæ—¶åŒºï¼Œç¾å›½æ—¶é—´ã€æ—¥æœ¬æ—¶é—´ã€ä¸­å›½æ—¶é—´ã€éŸ©å›½æ—¶é—´ï¼›ä¸­æ—¥è‹±éŸ©è¯­ï¼Œç”šè‡³æ˜¯å…¶ä»–ä½ çœ‹å¾—æ‡‚çš„è¯­è¨€éƒ½OKï¼Œé€‰å¥½åè¿›å…¥ä¸‹ä¸€æ­¥ï¼Œè®¾ç½®ç½‘ç»œ

3.ï¼ˆè¯·å°†ç¬¬4æ­¥çš„æ‰€æœ‰æ–‡å­—çœ‹å®Œå†æ“ä½œï¼ï¼‰

4.è®¾ç½®ç½‘ç»œçš„æ—¶å€™ï¼Œä¸è¦æ€¥ç€ä¸‹ä¸€æ­¥ï¼è®¾ç½®å¥½ç½‘ç»œä¹‹åï¼Œå±å¹•çŠ¶æ€æ å³ä¸Šè§’æ˜¾ç¤ºWi-Fiæˆ–æœ‰çº¿ç½‘ç»œçš„å›¾æ ‡ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/jie-jue-Steam%20Deck-shou-ci-kai-ji-qia-geng-xin-qing-kuang.html</guid><pubDate>Sun, 12 Oct 2025 13:10:18 +0000</pubDate></item><item><title>Stardew Valley æ˜Ÿéœ²è°·modå¤‡ä»½</title><link>https://doulifv.github.io/blog/post/Stardew%20Valley%20-xing-lu-gu-mod-bei-fen.html</link><description>## ä¸‡ä¸€æ¢ç”µè„‘åˆ«ç»™æˆ‘æ•´æ²¡äº†æå‰è®°å½•å¤‡ä»½
 &lt;div align='center'&gt;&lt;img src='https://smapi.io/Content/images/pufferchick.svg'&gt;&lt;/div&gt;

#### [SMAPI:ä¸‡ç‰©ä¹‹æºï¼Œæ²¡æœ‰è¿™ä¸ªä½ å•¥ä¹Ÿå¹²ä¸äº†](https://smapi.io/)  
#### [UIInfoSuite2:UIä¿¡æ¯æ˜¾ç¤ºå¹¸è¿å€¼ã€ç‰©å“ä»·æ ¼ã€å¤©æ°”é¢„æŠ¥ç­‰ ](https://github.com/Annosz/UIInfoSuite2)
#### [NPCMapLocations:ç”¨æ¥æ˜¾ç¤ºNPCçš„å®æ—¶ä½ç½®ä¿¡æ¯](https://www.nexusmods.com/stardewvalley/mods/239)
#### [Lookup Anything:ç”¨æ¥æ˜¾ç¤ºNPCçš„å–œå¥½ç‰©å“å±æ€§](https://www.nexusmods.com/stardewvalley/mods/541)
ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Stardew%20Valley%20-xing-lu-gu-mod-bei-fen.html</guid><pubDate>Sun, 12 Oct 2025 12:41:00 +0000</pubDate></item><item><title>NASè½¯ä»¶æ¨è</title><link>https://doulifv.github.io/blog/post/NAS-ruan-jian-tui-jian.html</link><description>webç¡¬ç›˜ç®¡ç†å·¥å…·
[cockpit](https://cockpit-project.org/running.html)
ç›´æ’­å½•åˆ¶å·¥å…·
[/bililive-go](https://github.com/bililive-go/bililive-go)
å¼€æºLinuxè¿ç»´webé¢æ¿
[1panel](https://1panel.cn/)
ç£åŠ›ä¸‹è½½
[qBittorrent](https://github.com/qbittorrent/qBittorrent)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/NAS-ruan-jian-tui-jian.html</guid><pubDate>Sat, 11 Oct 2025 07:47:42 +0000</pubDate></item><item><title>Debian aptæ›´æ–°httpsæºç¼ºå°‘å…¬é’¥é—®é¢˜</title><link>https://doulifv.github.io/blog/post/Debian%20apt-geng-xin-https-yuan-que-shao-gong-yao-wen-ti.html</link><description>
&gt;root@debian:~# apt update
Get:1 http://repo.mysql.com/apt/debian buster InRelease [22.1 kB]     
Hit:2 http://mirrors4.tuna.tsinghua.edu.cn/debian buster InRelease    
Hit:3 http://mirrors4.tuna.tsinghua.edu.cn/debian buster-updates InRelease
Get:4 http://mirrors4.tuna.tsinghua.edu.cn/debian buster-backports InRelease [51.4 kB]
Err:1 http://repo.mysql.com/apt/debian buster InRelease
  The following signatures couldn't be verified because the public key is not available: NO_PUBKEY **467B942D3A79BD29**
Get:5 http://mirrors4.tuna.tsinghua.edu.cn/debian-security buster/updates InRelease [34.8 kB]
Reading package lists... Done      
W: GPG error: http://repo.mysql.com/apt/debian buster InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 467B942D3A79BD29
E: The repository 'http://repo.mysql.com/apt/debian buster InRelease' is not signed.
N: Updating from such a repository can't be done securely, and is therefore disabled by default.
N: See apt-secure(8) manpage for repository creation and user configuration details.

æ·»åŠ 
```
apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 467B942D3A79BD29
```
&gt;root@debian:~# apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 467B942D3A79BD29
Executing: /tmp/apt-key-gpghome.BKquJCirKG/gpg.1.sh --keyserver hkp://keyserver.ubuntu.com:80 --recv 467B942D3A79BD29
gpg: key 467B942D3A79BD29: public key 'MySQL Release Engineering &lt;mysql-build@oss.oracle.com&gt;' imported
gpg: Total number processed: 1
gpg:               imported: 1

æ­¤æ—¶å†æ›´æ–°å°±æ²¡æœ‰é—®é¢˜äº†

å‚è€ƒ:[#è§£å†³ ç”±äºæ²¡æœ‰å…¬é’¥ï¼Œæ— æ³•éªŒè¯ä¸‹åˆ—ç­¾å :NO_PUBKEY-åšå®¢å›­](https://www.cnblogs.com/2205254761qq/p/11863928.html)
ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian%20apt-geng-xin-https-yuan-que-shao-gong-yao-wen-ti.html</guid><pubDate>Sat, 11 Oct 2025 05:54:39 +0000</pubDate></item><item><title>è§£å†³Debiané”®ç›˜é”™ä¹±é—®é¢˜</title><link>https://doulifv.github.io/blog/post/jie-jue-Debian-jian-pan-cuo-luan-wen-ti.html</link><description>1.ç¼–è¾‘vimrc.tiny æ–‡ä»¶
```
vi /etc/vim/vimrc.tiny 
```
2.ä¿®æ”¹ã€å¢åŠ ä»¥ä¸‹ä¸¤è¡Œå†…å®¹
```
set nocompatible #ä¿®æ”¹
set backspace=2 #å¢åŠ 
```
3.ä¿å­˜é€€å‡ºå³å¯

[vim æ–¹å‘é”®å’Œbackspaceä¹±ç -CSDN](https://blog.csdn.net/qq_36340642/article/details/109806721)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/jie-jue-Debian-jian-pan-cuo-luan-wen-ti.html</guid><pubDate>Sat, 11 Oct 2025 05:54:09 +0000</pubDate></item><item><title>æ‰‹åŠ¨ä½¿ç”¨Acme.shè¯ä¹¦è„šæœ¬ç”³è¯·SSLè¯ä¹¦</title><link>https://doulifv.github.io/blog/post/shou-dong-shi-yong-Acme.sh-zheng-shu-jiao-ben-shen-qing-SSL-zheng-shu.html</link><description>
#å‡†å¤‡ææ–™
ä¸€å°VPS
ä¸€æšåŸŸå
CloudFlareè´¦å·ï¼ˆå¦‚ä½¿ç”¨CF APIï¼‰

#éƒ¨ç½²æ­¥éª¤
###å®‰è£…Acme.shè¯ä¹¦ç”³è¯·è„šæœ¬
1.è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…Acme.shè¯ä¹¦ç”³è¯·è„šæœ¬
```
curl https://get.acme.sh | sh -s email=my@example.com
```
&gt;ç”±äºAcme.shè„šæœ¬è°ƒç”¨äº†GitHubçš„èµ„æºï¼Œä¸”GitHubä¸æ”¯æŒçº¯IPv6çš„ç¯å¢ƒï¼Œæ‰€ä»¥è¯·è‡ªè¡Œè®¾ç½®DNS64æˆ–å®‰è£…WARPè§£å†³
å»ºè®®æ›¿æ¢[my@example.com](mailto:my@example.com)ä¸ºè‡ªå·±çš„é‚®ç®±
2.åˆ‡æ¢é»˜è®¤è¯ä¹¦ç­¾å‘çš„CAæœºæ„ä¸ºä¸‹é¢ä¸‰å®¶çš„ä»»ä½•ä¸€å®¶

Letâ€™s Encrypt ï¼ˆç­¾å‘é€Ÿåº¦å¿«ã€ç¨³å®šï¼‰
```
bash ~/.acme.sh/acme.sh --set-default-ca --server letsencrypt
```
ZeroSSL ï¼ˆç¨³å®šã€ä½†éƒ¨åˆ†æƒ…å†µæ— æ³•ç­¾å‘ï¼‰
```
bash ~/.acme.sh/acme.sh --set-default-ca --server zerossl
```
Buypassï¼ˆæ²¡è¯•è¿‡ï¼‰
```
bash ~/.acme.sh/acme.sh --set-default-ca --server buypass
```
3.è®¾ç½®Acme.shè‡ªåŠ¨æ›´æ–°ï¼Œå§‹ç»ˆä¸å®˜æ–¹ä¿æŒä¸€è‡´
```
bash ~/.acme.sh/acme.sh --upgrade --auto-upgrade
```
###ä½¿ç”¨Standaloneæ¨¡å¼ç”³è¯·SSLè¯ä¹¦
æ­¤æ–¹æ³•ä½¿ç”¨ä¹‹å‰è¯·ç¡®ä¿80ç«¯å£ç•…é€šï¼Œå¹¶ä¸”åŸŸåå·²ç»äº‹å…ˆè§£æåˆ°VPSçš„IP
åŸŸåè§£æè‡³IPv4ï¼š
```
bash ~/.acme.sh/acme.sh --issue -d 'åŸŸå' --standalone -k ec-256
```
åŸŸåå·²è§£æè‡³IPv6ï¼š
```
bash ~/.acme.sh/acme.sh --issue -d 'åŸŸå' --standalone -k ec-256 --listen-v6
```
###ä½¿ç”¨CloudFlare API Keyç”³è¯·SSLè¯ä¹¦
æ­¤æ–¹æ³•å¯ä»¥ä½¿ç”¨æ³›åŸŸåã€æ— éœ€DNSè§£æï¼Œä½†ç”±äºå—åˆ°CF APIé™åˆ¶ï¼Œä¸å¯é€‚ç”¨äºFreenomç³»åˆ—çš„å…è´¹åŸŸå
1.è®¾ç½®CloudFlare Global API Keyå’Œç™»å½•é‚®ç®±
```
export CF_Key='ä½ è‡ªå·±çš„CloudFlare Global API Key'
export CF_Email='ä½ è‡ªå·±çš„CloudFlareè´¦æˆ·ç™»å½•é‚®ç®±'
```
2.è¿è¡Œä¸€ä¸‹å‘½ä»¤
####å•åŸŸå
IPv4 æˆ–åŸç”ŸåŒæ ˆVPS
```
bash ~/.acme.sh/acme.sh --issue --dns dns_cf -d 'åŸŸå' -k ec-256
```
IPv6
```
bash ~/.acme.sh/acme.sh --issue --dns dns_cf -d 'åŸŸå' -k ec-256 --listen-v6
```
####æ³›åŸŸå
IPv4 æˆ–åŸç”ŸåŒæ ˆVPS
```
bash ~/.acme.sh/acme.sh --issue --dns dns_cf -d '*.åŸŸå' -d 'åŸŸå' -k ec-256
```
IPv6
```
bash ~/.acme.sh/acme.sh --issue --dns dns_cf -d '*.åŸŸå' -d 'åŸŸå' -k ec-256 --listen-v6
```
####å®‰è£…åŸŸåè¯ä¹¦
ç”±äºacme.shçš„è¯ä¹¦ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å®‰è£…è¯ä¹¦
å•åŸŸå
```
bash ~/.acme.sh/acme.sh --install-cert -d 'åŸŸå' --key-file /root/private.key --fullchain-file /root/cert.crt --ecc
```
æ³›åŸŸå
```
bash ~/.acme.sh/acme.sh --install-cert -d '*.åŸŸå' --key-file /root/private.key --fullchain-file /root/cert.crt --ecc
```
&gt;è¿è¡Œæ­¤å‘½ä»¤åï¼Œè¯ä¹¦crtè·¯å¾„ä¸º/root/cert.crtï¼Œç§é’¥keyè·¯å¾„ä¸º/root/private.keyï¼Œå¯è‡ªè¡Œä¿®æ”¹

####æŸ¥çœ‹ç›®å‰ç”³è¯·çš„è¯ä¹¦
```
bash ~/.acme.sh/acme.sh --list
```
####æ’¤é”€ç›®å‰ç”³è¯·çš„è¯ä¹¦
```
bash ~/.acme.sh/acme.sh --revoke -d 'åŸŸå' --ecc
bash ~/.acme.sh/acme.sh --remove -d 'åŸŸå' --ecc
```
####æ‰‹åŠ¨ç»­æœŸè¯ä¹¦
```
bash ~/.acme.sh/acme.sh --renew -d 'åŸŸå' --force --ecc
```
####å¸è½½Acme.shè„šæœ¬
```
bash ~/.acme.sh/acme.sh --uninstall
```
[[DELETE]æ‰‹åŠ¨ä½¿ç”¨Acme.shè¯ä¹¦è„šæœ¬ç”³è¯·SSLè¯ä¹¦ | MisakaNo ã® å°ç ´ç«™](https://blog.misaka.rest/2023/04/02/acme-ssl-cert/?highlight=acme)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/shou-dong-shi-yong-Acme.sh-zheng-shu-jiao-ben-shen-qing-SSL-zheng-shu.html</guid><pubDate>Sat, 11 Oct 2025 05:53:37 +0000</pubDate></item><item><title>Debian ç³»ç»Ÿå®‰è£… MySQL</title><link>https://doulifv.github.io/blog/post/Debian%20-xi-tong-an-zhuang-%20MySQL.html</link><description>é¦–å…ˆå®‰è£…éœ€è¦ç”¨åˆ°çš„ä¾èµ–
```
apt install wget gnupg lsb-release -y
```
ä½¿ç”¨wgetè·å–debåŒ…ã€å®‰è£…  | éœ€è¦å…¶ä»–ç‰ˆæœ¬å¯å‰å¾€[MySQLå®˜ç½‘ä¸‹è½½](https://dev.mysql.com/downloads/)
```
wget https://dev.mysql.com/get/mysql-apt-config_0.8.28-1_all.deb
dpkg -i mysql-apt-config_0.8.28-1_all.deb 
```
![é€‰æ‹©OKå³å¯](https://upload-images.jianshu.io/upload_images/27021437-9f963c9264a73d55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æ›´æ–°è½¯ä»¶åŒ…ã€å®‰è£…mysql-server
```
apt update
apt install mysql-server
```
![è®¾ç½®ä¸€ä¸ªå¯é çš„å¯†ç ](https://upload-images.jianshu.io/upload_images/27021437-2cd8bc2131ef6f72.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
è‡³æ­¤MySQLæœåŠ¡å·²ç»éƒ¨ç½²å®Œæ¯•ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian%20-xi-tong-an-zhuang-%20MySQL.html</guid><pubDate>Sat, 11 Oct 2025 05:53:05 +0000</pubDate></item><item><title>Debian 12 æ›´æ”¹aptæº</title><link>https://doulifv.github.io/blog/post/Debian%2012%20-geng-gai-apt-yuan.html</link><description>æ›´æ–°æºå‘½ä»¤
```
apt-get update 
apt-get upgrade 
```
[å¯å‚è€ƒæ¸…åå¤§å­¦é•œåƒç«™æ•™ç¨‹](https://mirrors.tuna.tsinghua.edu.cn/help/debian/#:~:text=%E4%B8%80%E8%88%AC%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8C%E5%B0%86%20%2Fetc%2Fapt%2Fsources.list%20%E6%96%87%E4%BB%B6%E4%B8%AD,Debian%20%E9%BB%98%E8%AE%A4%E7%9A%84%E6%BA%90%E5%9C%B0%E5%9D%80%20http%3A%2F%2Fdeb.debian.org%2F%20%E6%9B%BF%E6%8D%A2%E4%B8%BA%E9%95%9C%E5%83%8F%E5%9C%B0%E5%9D%80%E5%8D%B3%E5%8F%AF%E3%80%82)
Debian Buster ä»¥ä¸Šç‰ˆæœ¬é»˜è®¤æ”¯æŒ HTTPS æºã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian%2012%20-geng-gai-apt-yuan.html</guid><pubDate>Sat, 11 Oct 2025 05:52:07 +0000</pubDate></item><item><title>Debianä¸‹é€šè¿‡Wondershaperé™åˆ¶ç½‘é€Ÿ</title><link>https://doulifv.github.io/blog/post/Debian-xia-tong-guo-Wondershaper-xian-zhi-wang-su.html</link><description>å®‰è£…gitå’Œmake
```
apt install make git -y 
```
ä½¿ç”¨gitæ‹‰å–ä»£ç  ã€è¿›å…¥æ–‡ä»¶å¤¹ã€ä½¿ç”¨makeå®‰è£…
```
git clone https://github.com/magnific0/wondershaper.git
cd wondershaper
make install
```
é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›¸å…³è¿è¡Œå‚æ•°
```
wondershaper -h 
```
&gt;   -a æŒ‡å®šç½‘ç»œé€‚é…å™¨
   -d è®¾ç½®æœ€å¤§ä¸‹è½½é€Ÿç‡(å•ä½ä¸ºkbps)
   -u è®¾ç½®æœ€å¤§ä¸Šä¼ é€Ÿç‡(å•ä½:kbps)
   -p ä½¿ç”¨'/etc/systemd/wondershaper.conf'ä¸­çš„é¢„è®¾å€¼
   -f ä½¿ç”¨æŒ‡å®šçš„é¢„è®¾æ–‡ä»¶
   -c æ¸…é™¤é€‚é…å™¨çš„é™åˆ¶
   -s æ˜¾ç¤ºé€‚é…å™¨çš„å½“å‰çŠ¶æ€

ä¾‹å¦‚:é™åˆ¶ç½‘å¡ens33çš„ä¸Šä¼ å’Œä¸‹è½½ä¸º8000kbpsæ¯ç§’(8kbit/s=1kByte)
```
wondershaper -a ens33 -u 8000 -d 8000
```
è®¾ç½®å®Œå¯ä»¥å®‰è£…speedtest-cliæµ‹è¯•ä¸€ä¸‹é™é€Ÿæ•ˆæœ
```
apt install speedtest-cli
speedtest #æµ‹è¯•ç½‘é€Ÿ
```
å¸è½½
```
make uninstall #å¸è½½
reboot #é‡å¯
```
ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian-xia-tong-guo-Wondershaper-xian-zhi-wang-su.html</guid><pubDate>Sat, 11 Oct 2025 05:51:17 +0000</pubDate></item><item><title>Debianç½‘ç»œé…ç½®ä»¥åŠå¼€å¯rootè¿œç¨‹ç™»å½•</title><link>https://doulifv.github.io/blog/post/Debian-wang-luo-pei-zhi-yi-ji-kai-qi-root-yuan-cheng-deng-lu.html</link><description>æŸ¥çœ‹éœ€è¦é…ç½®çš„ç½‘å¡å
```
ip address
```
ç¼–è¾‘ç½‘å¡é…ç½®æ–‡ä»¶/etc/network/interfaces
```
vi /etc/network/interfaces
```
æ·»åŠ ä»¥ä¸‹å­—æ®µä¸ºens33è¿™å¼ ç½‘å¡æ·»åŠ 192.168.1.2è¿™IPåœ°å€
```
auto ens33
iface ens33 inet static
address 192.168.1.2/24 #ä¸»æœºåœ°å€/æ©ç 
gateway 192.168.1.1 #ç½‘å…³
```
æ·»åŠ DNSæœåŠ¡å™¨åœ°å€
```
echo &gt;&gt; /etc/resolv.conf  nameserver 8.8.8.8
echo &gt;&gt; /etc/resolv.conf  nameserver 1.1.1.1
```
é‡å¯ç½‘å¡ã€æŸ¥çœ‹ç½‘å¡IPé…ç½®æƒ…å†µ
```
/etc/init.d/networking restart
ip address
```
å…è®¸rootç”¨æˆ·è¿œç¨‹ç™»å½•ã€é‡å¯sshæœåŠ¡
```
echo PermitRootLogin yes &gt;&gt; /etc/ssh/sshd_config  
/etc/init.d/ssh restart
```ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian-wang-luo-pei-zhi-yi-ji-kai-qi-root-yuan-cheng-deng-lu.html</guid><pubDate>Sat, 11 Oct 2025 05:50:48 +0000</pubDate></item><item><title>Debianå¼€å¯BBRåŠ é€Ÿ</title><link>https://doulifv.github.io/blog/post/Debian-kai-qi-BBR-jia-su.html</link><description>Debian10-12é»˜è®¤ç¼–è¯‘äº†BBRæ‹¥å¡æ§åˆ¶ç®—æ³•å¯ç›´æ¥å¼€å¯
å‘½ä»¤å¦‚ä¸‹
```
echo net.core.default_qdisc=fq &gt;&gt; /etc/sysctl.conf
echo net.ipv4.tcp_congestion_control=bbr &gt;&gt; /etc/sysctl.conf
sysctl -p
```
æ£€æŸ¥æ˜¯å¦é…ç½®æˆåŠŸ
```
sysctl net.ipv4.tcp_available_congestion_control
```
å›æ˜¾å¦‚ä¸‹ä¿¡æ¯åˆ™è¡¨ç¤ºæˆåŠŸå¼€å¯BBRåŠ é€Ÿ
&gt;net.ipv4.tcp_available_congestion_control = reno cubic bbr
ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian-kai-qi-BBR-jia-su.html</guid><pubDate>Sat, 11 Oct 2025 05:50:18 +0000</pubDate></item><item><title>Debiané…ç½®Fail2bané˜²æ­¢SSHè´¦å·å¯†ç è¢«æš´åŠ›ç ´è§£</title><link>https://doulifv.github.io/blog/post/Debian-pei-zhi-Fail2ban-fang-zhi-SSH-zhang-hao-mi-ma-bei-bao-li-po-jie.html</link><description>å®‰è£…fail2banæœåŠ¡
```
apt install fail2ban
```
å¯åŠ¨ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ã€æŸ¥çœ‹çŠ¶æ€
```
systemctl start fail2ban
systemctl enable fail2ban
systemctl status fail2ban
``` 
é…ç½®
[ ! ] è¿™é‡Œä¸å»ºè®®ç›´æ¥ä¿®æ”¹/etc/fail2ban/jail.confæ–‡ä»¶é‡Œé¢çš„å‚æ•°
å¯ä»¥åˆ›å»º/etc/fail2ban/jail.localæ–‡ä»¶å®ƒä¼šé»˜è®¤è¦†ç›–æ‰jail.confæ–‡ä»¶é‡Œé¢çš„å‚æ•°
``` 
vim /etc/fail2ban/jail.local
``` 
è®¾ç½®ä»¥ä¸‹å‚æ•°
```
[sshd]               
enabled = true       
port = 22 #é»˜è®¤ç«¯å£å·å¦‚ä¸æ˜¯è¯·ä¿®æ”¹           
filter = sshd      
logpath = /var/log/fail2ban.log  #æ—¥å¿—
maxretry = 3        #æœ€å¤§å°è¯•æ¬¡æ•°
findtime = 8467200 #
bantime = 8467200 # è§£ç”¨æ—¶é—´
backend = systemd
ignoreip = 127.0.0.1/8 192.168.0.1/16  #ç™½åå•ç½‘æ®µ/åœ°å€
```
é‡æ–°å¯åŠ¨Fail2banæœåŠ¡
```
systemctl restart fail2ban
```
æŸ¥çœ‹fail2ban sshè¿›ç¨‹çš„ç¦ç”¨åˆ—è¡¨
 ```
fail2ban-client status sshd
```
è§£ç¦banåˆ—è¡¨å†…IP
```
fail2ban-client set sshd unbanip [IP address]
```
&gt;ä¾‹å¦‚ï¼šfail2ban-client set sshd unbanip 8.245.78.2
è¡¨ç¤ºè§£ç¦8.245.78.2è¿™ä¸ªIPåœ°å€

å¸è½½æœåŠ¡
```
systemctl stop fail2ban 
apt purge fail2ban
```ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Debian-pei-zhi-Fail2ban-fang-zhi-SSH-zhang-hao-mi-ma-bei-bao-li-po-jie.html</guid><pubDate>Sat, 11 Oct 2025 05:49:44 +0000</pubDate></item><item><title>RustDeskè‡ªæ‰˜ç®¡</title><link>https://doulifv.github.io/blog/post/RustDesk-zi-tuo-guan.html</link><description>[https://rustdesk.com/docs/en/self-host/rustdesk-server-oss/install/](https://rustdesk.com/docs/en/self-host/rustdesk-server-oss/install/)
[https://www.cnblogs.com/ryanyangcs/p/18186163](https://www.cnblogs.com/ryanyangcs/p/18186163)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/RustDesk-zi-tuo-guan.html</guid><pubDate>Sat, 11 Oct 2025 02:11:18 +0000</pubDate></item><item><title>vmware linuxæŒ‚è½½å…±äº«æ–‡ä»¶å¤¹</title><link>https://doulifv.github.io/blog/post/vmware%20linux-gua-zai-gong-xiang-wen-jian-jia.html</link><description>å®‰è£…ä¾èµ–
```
apt install open-vm-tools open-vm-tools-desktop
```
æŸ¥çœ‹å…±äº«æ–‡ä»¶å¤¹[è®¾ç½®çš„å…±äº«å]
```
vmware-hgfsclient
```
è®¾ç½®å…±äº«æ–‡ä»¶å¤¹
```
vmhgfs-fuse .host:/æ–‡ä»¶å¤¹å/ /mnt/hgfs -o allow_other
```
```
cd /mnt/hgfs
```ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/vmware%20linux-gua-zai-gong-xiang-wen-jian-jia.html</guid><pubDate>Sat, 11 Oct 2025 01:18:10 +0000</pubDate></item><item><title>VMware Tool</title><link>https://doulifv.github.io/blog/post/VMware%20Tool.html</link><description>

vmwaretools download link
https://packages.vmware.com/tools/releases/
blog link
title: è™šæ‹Ÿæœºå®‰è£…VMware Toolsæ—¶æç¤ºç¼ºå°‘KB2919355è¡¥ä¸
https://www.dinghui.org/vmware-tools-microsoft-kb2919355.html

æŸ¥è¯¢VMware kb55798ï¼Œæ˜¯ç”±äºå®‰è£…VMware Tools 10.3.xä»¥ä¸Šç‰ˆæœ¬æ—¶ï¼Œä¼šæ£€æµ‹ç¯å¢ƒæ˜¯å¦å…·å¤‡Microsoft Visual C++ 2017 Redistributableå…ˆå†³æ¡ä»¶ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/VMware%20Tool.html</guid><pubDate>Sat, 11 Oct 2025 01:12:50 +0000</pubDate></item><item><title>è‡ªç”¨çš„VPSå•†å®¶åˆ—è¡¨</title><link>https://doulifv.github.io/blog/post/zi-yong-de-VPS-shang-jia-lie-biao.html</link><description>[racknerd](https://racknerd.com/)
[massivegrid](https://www.massivegrid.com/)
[avenacloud](https://avenacloud.com/)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/zi-yong-de-VPS-shang-jia-lie-biao.html</guid><pubDate>Fri, 10 Oct 2025 12:40:11 +0000</pubDate></item><item><title>é€šè¿‡å¯¼å‡ºWindowsæ³¨å†Œè¡¨æ–‡ä»¶å¤‡ä»½å…±äº«ç›®å½•å’Œæƒé™</title><link>https://doulifv.github.io/blog/post/tong-guo-dao-chu-Windows-zhu-ce-biao-wen-jian-bei-fen-gong-xiang-mu-lu-he-quan-xian.html</link><description>export(admin).bat
```
@echo off
set rf=.\shareConfig.reg

reg export HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\lanmanserver\Shares %rf%
pause
```
import(admin).bat
```
@echo off
set rf=.\shareConfig.reg

reg import %rf%
net stop server
net start server
net share
pause
```
ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/tong-guo-dao-chu-Windows-zhu-ce-biao-wen-jian-bei-fen-gong-xiang-mu-lu-he-quan-xian.html</guid><pubDate>Fri, 10 Oct 2025 12:33:27 +0000</pubDate></item><item><title>windows é…ç½®ç«¯å£è½¬å‘</title><link>https://doulifv.github.io/blog/post/windows%20-pei-zhi-duan-kou-zhuan-fa.html</link><description>#####ä»¥Windows7ä¸ºä¾‹
#####æ˜¾ç¤ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„ç«¯å£è½¬å‘è§„åˆ™
```
netsh interface portproxy show all
```
#####æ·»åŠ ç«¯å£è½¬å‘
```
netsh interface portproxy add v4tov4 listenaddress=192.168.1.214 listenport=45622 connectaddress=192.168.6.128 connectport=45622

#æºä¸»æœº192.168.1.214:45622 è½¬å‘åˆ° 192.168.6.128:45622
```
#####åˆ é™¤è½¬å‘è§„åˆ™
```
netsh interface portproxy delete v4tov4 listenaddress=192.168.1.214 listenport=45622 
```
---
![image.png](https://upload-images.jianshu.io/upload_images/27021437-58e517f1e8f128c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

[netsh windows7 è‡ªå¸¦ç«¯å£æ˜ å°„ï¼ˆè½¬å‘ï¼‰ä½¿ç”¨æ•™ç¨‹-CSDN](https://blog.csdn.net/u010953692/article/details/77045211)
[windowså‘½ä»¤è¡Œä¸‹ç”¨netshå®ç°ç«¯å£è½¬å‘(ç«¯å£æ˜ å°„)-CSDN](https://blog.csdn.net/dogquill/article/details/50143925)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/windows%20-pei-zhi-duan-kou-zhuan-fa.html</guid><pubDate>Fri, 10 Oct 2025 12:31:21 +0000</pubDate></item><item><title>Wireguard</title><link>https://doulifv.github.io/blog/post/Wireguard.html</link><description>### ä¸€ã€å®‰è£… 
å®‰è£…éœ€è¦çš„ä¾èµ–
```
apt install wireguard
```
å¼€å¯æµé‡è½¬å‘
```
echo 'net.ipv4.ip_forward = 1' &gt;&gt; /etc/sysctl.conf
sysctl -p
```
åˆ›å»ºWireguard &amp;&amp; è®¾ç½®777ä»»æ„è¯»å–æ‰§è¡Œæƒé™
```
mkdir -p /etc/wireguard &amp;&amp; chmod 0777 /etc/wireguard
cd /etc/wireguard
```
ç”Ÿæˆå…¬ã€ç§é’¥æ–‡ä»¶
```
wg genkey | tee server_privatekey | wg pubkey &gt; server_publickey
wg genkey | tee client_privatekey | wg pubkey &gt; client_publickey
```
ç”Ÿæˆçš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/etc/wireguard/wg0.confï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š
```
echo '
[Interface]
PrivateKey = $(cat server_privatekey) # å¡«å†™æœ¬æœºçš„privatekey å†…å®¹
Address = 10.0.8.1/24
PostUp   = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
PostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE
#æ³¨æ„ä¿®æ”¹å¯¹åº”ç½‘å¡åç§°
ListenPort = 50814 # æ³¨æ„è¯¥ç«¯å£æ˜¯UDPç«¯å£
DNS = 8.8.8.8
MTU = 1420
[Peer]
PublicKey =  $(cat client_publickey)  # å¡«å†™å¯¹ç«¯çš„publickey å†…å®¹
AllowedIPs = 10.0.8.10/24 ' &gt; wg0.conf
```
è¿˜éœ€è¦è®¾ç½®å¼€æœºå¯åŠ¨ï¼š
```
systemctl enable wg-quick@wg0
```
å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ç”Ÿæˆ
```echo '
[Interface]
  PrivateKey = $(cat client_privatekey)  # å¡«å†™æœ¬æœºçš„privatekey å†…å®¹
  Address = 10.0.8.10/24
  DNS = 8.8.8.8
  MTU = 1420

[Peer]
  PublicKey = $(cat server_publickey)  # å¡«å†™å¯¹ç«¯çš„publickey å†…å®¹
  Endpoint = serverå…¬ç½‘çš„IP:50814
  AllowedIPs = 0.0.0.0/0, ::0/0
  PersistentKeepalive = 25 ' &gt; client.conf
```
### æœåŠ¡çš„å¯åŠ¨ | åœæ­¢

#### æœåŠ¡ç«¯å¯åŠ¨

å¯åŠ¨æˆ–åœæ­¢**wireguard**æœåŠ¡ç«¯çš„å‘½ä»¤å¦‚ä¸‹ï¼š
 å¯åŠ¨WireGuard
```
wg-quick up wg0
```
åœæ­¢WireGuard
```
wg-quick down wg0
```
æŸ¥çœ‹wireguardæœåŠ¡ç«¯è¿è¡ŒçŠ¶æ€å‘½ä»¤ï¼š
```
wg
```
#### å®¢æˆ·ç«¯å¯åŠ¨
å¯åŠ¨æˆ–åœæ­¢wireguardå®¢æˆ·ç«¯çš„å‘½ä»¤å¦‚ä¸‹ï¼š
å¯åŠ¨WireGuard
```
wg-quick up client
```
åœæ­¢WireGuard
```
wg-quick down client
```
---
[Err-1](https://askubuntu.com/questions/1456439/wireguard-error-message-resolvconf-command-not-found)
/usr/bin/wg-quick: line 32: resolvconf: command not found
```
apt install openresolv
```
[Err-2]
/usr/bin/wg-quick: line 295: iptables: command not found
```
apt install iptables
```
---
å‚è€ƒæ•™ç¨‹
[Installation - WireGuard](https://www.wireguard.com/install/)
[ç»„ç½‘ç¥å™¨WireGuardå®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼ˆè¶…è¯¦ç»†ï¼‰_wirguard-CSDNåšå®¢](https://blog.csdn.net/qq_20042935/article/details/127089626)
[/usr/bin/wg-quickï¼šç¬¬ 31 è¡Œï¼šresolvconfï¼šæ‰¾ä¸åˆ°å‘½ä»¤ [WireGuard | Debian] - è¶…çº§ç”¨æˆ· --- /usr/bin/wg-quick: line 31: resolvconf: command not found [WireGuard | Debian] - Super User](https://superuser.com/questions/1500691/usr-bin-wg-quick-line-31-resolvconf-command-not-found-wireguard-debian)
[å¦‚ä½•åœ¨Ubuntu 20.04å®‰è£…WireGuard VPN | myfreax](https://www.myfreax.com/how-to-set-up-wireguard-vpn-on-ubuntu-20-04/)


ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Wireguard.html</guid><pubDate>Fri, 10 Oct 2025 12:24:51 +0000</pubDate></item><item><title>windows7å…³é—­Google Chromeçƒ¦äººçš„æ›´æ–°æç¤º</title><link>https://doulifv.github.io/blog/post/windows7-guan-bi-Google%20Chrome-fan-ren-de-geng-xin-ti-shi.html</link><description>ä½¿ç”¨TXTæ–‡æœ¬ç¼–è¾‘å™¨
æ–°å»ºæ³¨å†Œè¡¨æ–‡ä»¶ï¼Œæ›´ç»™TXTåç¼€ä¸º **.reg** 
closeChromeUpdateWarning.reg
```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Policies\Google\Chrome]
'SuppressUnsupportedOSWarning'=dword:00000001
```
åŒå‡»æ·»åŠ åˆ°æ³¨å†Œè¡¨å³å¯

---
[å¦‚ä½•å…³é—­â€œè‹¥è¦æ¥æ”¶åç»­ google chrome æ›´æ–°,æ‚¨éœ€ä½¿ç”¨ windows 10 æˆ–æ›´é«˜ç‰ˆæœ¬â€](https://www.jianshu.com/p/d1001a98fb77)
  ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/windows7-guan-bi-Google%20Chrome-fan-ren-de-geng-xin-ti-shi.html</guid><pubDate>Fri, 10 Oct 2025 12:20:04 +0000</pubDate></item><item><title>debianä¸‹ä»¥å…‰ç›˜ä¸ºaptæºå®‰è£…è½¯ä»¶åŒ…</title><link>https://doulifv.github.io/blog/post/debian-xia-yi-guang-pan-wei-apt-yuan-an-zhuang-ruan-jian-bao.html</link><description>å¯¹äºä¸€äº›åœæ­¢ç»´æŠ¤çš„debianç‰ˆæœ¬ç½‘ç»œè½¯ä»¶åŒ…èµ„æºå¤§å¤šåœæ­¢ç»´æŠ¤ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡æŒ‚è½½ISOå®‰è£…å…‰ç›˜å®ç°æœ¬åœ°è½¯ä»¶åŒ…å®‰è£…
```
apt-cdrom add
```
ç³»ç»Ÿä¼šæç¤ºå°†ä½ è¦æ·»åŠ ä¸ºæºçš„å…‰ç›˜æ”¾å…¥å…‰é©±
ç„¶åenterç»§ç»­ï¼Œå°±è‡ªåŠ¨æ·»åŠ å¥½äº†
&gt;root@214:~# **apt-cdrom add**
Using CD-ROM mount point /media/cdrom/
Unmounting CD-ROM...
Waiting for disc...
**Please insert a Disc in the drive and press [Enter]**
Mounting CD-ROM...
Identifying... [3499991a1c974d34b1f07cea4df324ac-2]
Scanning disc for index files...
Found 2 package indexes, 0 source indexes, 2 translation indexes and 0 signatures
This disc is called: 
'Debian GNU/Linux 9.13.0 _Stretch_ - Official amd64 DVD Binary-1 20200718-11:07'
Reading Package Indexes... Done
Reading Translation Indexes... Done
Writing new source list
Source list entries for this disc are:
***deb cdrom:[Debian GNU/Linux 9.13.0 _Stretch_ - Official amd64 DVD Binary-1 20200718-11:07]/ stretch contrib main***
Unmounting CD-ROM...
Repeat this process for the rest of the CDs in your set.
---
[æ·æ°è€¶å¤«csdn-](https://blog.csdn.net/whw8007 'æ·æ°è€¶å¤«')-[debianä¸‹ä»¥å…‰ç›˜ä¸ºaptæºå®‰è£…è½¯ä»¶åŒ…](https://blog.csdn.net/whw8007/article/details/8833083)ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/debian-xia-yi-guang-pan-wei-apt-yuan-an-zhuang-ruan-jian-bao.html</guid><pubDate>Fri, 10 Oct 2025 12:17:10 +0000</pubDate></item><item><title>Hello world</title><link>https://doulifv.github.io/blog/post/Hello%20world.html</link><description>```Hello world```ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/post/Hello%20world.html</guid><pubDate>Fri, 10 Oct 2025 11:54:37 +0000</pubDate></item><item><title>about</title><link>https://doulifv.github.io/blog/about.html</link><description>Writing...Please wait.ã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/about.html</guid><pubDate>Sat, 11 Oct 2025 08:01:40 +0000</pubDate></item><item><title>link</title><link>https://doulifv.github.io/blog/link.html</link><description>linkã€‚</description><guid isPermaLink="true">https://doulifv.github.io/blog/link.html</guid><pubDate>Sat, 11 Oct 2025 12:15:49 +0000</pubDate></item></channel></rss>